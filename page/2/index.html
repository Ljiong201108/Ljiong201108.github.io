<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.1">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"yoursite.com","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="Ljiong">
<meta property="og:url" content="http://yoursite.com/page/2/index.html">
<meta property="og:site_name" content="Ljiong">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Jiong Liu">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://yoursite.com/page/2/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>Ljiong</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript><!-- hexo-inject:begin --><!-- hexo-inject:end -->

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Ljiong</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">不甘心有什么用呢?</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/08/14/Codeforces-Round-663-Div-2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jiong Liu">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ljiong">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/08/14/Codeforces-Round-663-Div-2/" class="post-title-link" itemprop="url">Codeforces Round #663 (Div. 2)</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-08-14 20:12:39" itemprop="dateCreated datePublished" datetime="2020-08-14T20:12:39+08:00">2020-08-14</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-08-15 04:40:58" itemprop="dateModified" datetime="2020-08-15T04:40:58+08:00">2020-08-15</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E9%A2%98%E8%A7%A3/" itemprop="url" rel="index"><span itemprop="name">题解</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>对于Codeforces Round #660(Div. 2) 的解题思路和一些想法</p>
<h4 id="A-Suborrays"><a href="#A-Suborrays" class="headerlink" title="A. Suborrays"></a>A. Suborrays</h4><p>A permutation of length $n$ is an array consisting of $n$ distinct integers from $1$ to $n$ in arbitrary order. For example, $[2,3,1,5,4]$ is a permutation, but $[1,2,2]$ is not a permutation ($2$ appears twice in the array) and $[1,3,4]$ is also not a permutation ($n=3$ but there is $4$ in the array). </p>
<p>For a positive integer $n$, we call a permutation $p$ of length $n$ <strong>good</strong> if the following condition holds for every pair $i$ and $j$ ($1≤i≤j≤n$) —</p>
<ul>
<li>$(pi OR pi+1 OR … OR pj−1 OR pj)≥j−i+1$, where $OR$ denotes the <a href="https://en.wikipedia.org/wiki/Bitwise_operation#OR" target="_blank" rel="noopener">bitwise OR operation.</a></li>
</ul>
<p>In other words, a permutation $p$ is <strong>good</strong> if for every subarray of $p$, the OROR of all elements in it is not less than the number of elements in that subarray. </p>
<p>Given a positive integer $n$, output any <strong>good</strong> permutation of length $n$. We can show that for the given constraints such a permutation always exists. </p>
<p><strong>Input</strong></p>
<p>Each test contains multiple test cases. The first line contains the number of test cases $t$ ($1≤t≤100$). Description of the test cases follows.</p>
<p>The first and only line of every test case contains a single integer $n$ ($1≤n≤100$).</p>
<p><strong>Output</strong></p>
<p>For every test, output any <strong>good</strong> permutation of length $n$ on a separate line. </p>
<p><strong>Example</strong></p>
<p>input</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">3</span><br><span class="line">1</span><br><span class="line">3</span><br><span class="line">7</span><br></pre></td></tr></table></figure>
<p>output</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1</span><br><span class="line">3 1 2</span><br><span class="line">4 3 5 2 7 1 6</span><br></pre></td></tr></table></figure>
<p><strong>Note</strong></p>
<p>For $n=3$, $[3,1,2]$ is a good permutation. Some of the subarrays are listed below.</p>
<ul>
<li>$3 OR 1=3≥2$ $(i=1,j=2)$</li>
<li>$3 OR 1 OR 2=3≥3$ $(i=1,j=3)$</li>
<li>$1 OR 2=3≥2$ $(i=2,j=3)$</li>
<li>$1≥1$ $(i=2,j=2)$</li>
</ul>
<p>Similarly, you can verify that $[4,3,5,2,7,1,6]$ is also good.</p>
<h5 id="解法"><a href="#解法" class="headerlink" title="解法"></a>解法</h5><p>经典第一题0.0</p>
<p>谁想着去模拟就掉进坑里面去了- . -</p>
<p>根据 $OR$ 的运算规律，如果$a&gt;b$, 那么$a$ $OR$ $b$ $≥$ $a$。</p>
<p>题意要求任意$k$个数$OR$出来的值要比$k$小$(0≤k≤n)$。</p>
<p>那么$[1,2,3,…,n]$正好满足，直接输出就好。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> t, n;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="built_in">cin</span>&gt;&gt;n;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">		<span class="built_in">cout</span>&lt;&lt;i&lt;&lt;<span class="string">" "</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">cout</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="built_in">cin</span>&gt;&gt;t;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=t;i++)&#123;</span><br><span class="line">		solve();</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="B-Fix-You"><a href="#B-Fix-You" class="headerlink" title="B. Fix You"></a>B. Fix You</h4><p>Consider a conveyor belt represented using a grid consisting of $n$ rows and mm columns. The cell in the $i$-th row from the top and the $j$-th column from the left is labelled $(i,j)$. </p>
<p>Every cell, except $(n,m)$, has a direction R (Right) or D (Down) assigned to it. If the cell $(i,j)$ is assigned direction R, any luggage kept on that will move to the cell $(i,j+1)$. Similarly, if the cell $(i,j)$ is assigned direction D, any luggage kept on that will move to the cell $(i+1,j)$. If at any moment, the luggage moves out of the grid, it is considered to be lost.</p>
<p>There is a counter at the cell $(n,m)$ from where all luggage is picked. A conveyor belt is called <strong>functional</strong> if and only if any luggage reaches the counter regardless of which cell it is placed in initially. More formally, for every cell $(i,j)$, any luggage placed in this cell should eventually end up in the cell $(n,m)$. </p>
<p>This may not hold initially; you are, however, allowed to <strong>change</strong> the directions of some cells to make the conveyor belt functional. Please determine the minimum amount of cells you have to change.</p>
<p>Please note that it is always possible to make any conveyor belt functional by changing the directions of some set of cells.</p>
<p><strong>Input</strong></p>
<p>Each test contains multiple test cases. The first line contains the number of test cases $t$ ($1≤t≤10$). Description of the test cases follows.</p>
<p>The first line of each test case contains two integers n,mn,m ($1≤n≤100$, $1≤m≤100$)  — the number of rows and columns, respectively.</p>
<p>The following $n$ lines each contain mm characters. The $j$-th character in the $i$-th line, ai,jai,j is the initial direction of the cell $(i,j)$. Please note that $a_{n,m}=C$.</p>
<p><strong>Output</strong></p>
<p>For each case, output in a new line the minimum number of cells that you have to change to make the conveyor belt functional.</p>
<p><strong>Example</strong></p>
<p>input</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">4</span><br><span class="line">3 3</span><br><span class="line">RRD</span><br><span class="line">DDR</span><br><span class="line">RRC</span><br><span class="line">1 4</span><br><span class="line">DDDC</span><br><span class="line">6 9</span><br><span class="line">RDDDDDRRR</span><br><span class="line">RRDDRRDDD</span><br><span class="line">RRDRDRRDR</span><br><span class="line">DDDDRDDRR</span><br><span class="line">DRRDRDDDR</span><br><span class="line">DDRDRRDDC</span><br><span class="line">1 1</span><br><span class="line">C</span><br></pre></td></tr></table></figure>
<p>output</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1</span><br><span class="line">3</span><br><span class="line">9</span><br><span class="line">0</span><br></pre></td></tr></table></figure>
<p><strong>Note</strong></p>
<p>In the first case, just changing the direction of $(2,3)$ to D is enough.</p>
<p>You can verify that the resulting belt is functional. For example, if we place any luggage at $(2,2)$, it first moves to $(3,2)$ and then to $(3,3)$.</p>
<p>In the second case, we have no option but to change the first $3$ cells from D to R making the grid equal to RRRC.</p>
<h5 id="解法-1"><a href="#解法-1" class="headerlink" title="解法"></a>解法</h5><p>贪心</p>
<p>把最右边的一列变成全都往下的，最下面的一行变成全都往右的，中间什么路线完全不用去管。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> t, n, m;</span><br><span class="line"><span class="keyword">char</span> G[<span class="number">110</span>][<span class="number">110</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=m;j++)&#123;</span><br><span class="line">			<span class="built_in">cout</span>&lt;&lt;G[i][j];</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="built_in">cout</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="built_in">cin</span>&gt;&gt;n&gt;&gt;m;</span><br><span class="line">	<span class="keyword">int</span> ans=<span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">		<span class="built_in">string</span> str;</span><br><span class="line">		<span class="built_in">cin</span>&gt;&gt;str;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=m;j++)&#123;</span><br><span class="line">			G[i][j]=str[j<span class="number">-1</span>];</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//print();</span></span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;n;i++)&#123;</span><br><span class="line">		<span class="keyword">if</span>(G[i][m]==<span class="string">'R'</span>) ans++;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;m;i++)&#123;</span><br><span class="line">		<span class="keyword">if</span>(G[n][i]==<span class="string">'D'</span>) ans++;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="built_in">cout</span>&lt;&lt;ans&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="built_in">cin</span>&gt;&gt;t;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=t;i++)&#123;</span><br><span class="line">		solve();</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="C-Cyclic-Permutations"><a href="#C-Cyclic-Permutations" class="headerlink" title="C. Cyclic Permutations"></a>C. Cyclic Permutations</h4><p>A permutation of length $n$ is an array consisting of $n$ distinct integers from $1$ to $n$ in arbitrary order. For example, $[2,3,1,5,4]$ is a permutation, but $[1,2,2]$ is not a permutation ($2$ appears twice in the array) and $[1,3,4]$ is also not a permutation ($n=3$ but there is $4$ in the array).</p>
<p>Consider a permutation pp of length $n$, we build a graph of size $n$ using it as follows:</p>
<ul>
<li>For every $1≤i≤n$, find the <strong>largest</strong> $j$ such that $1≤j<i$ $and$ $p_j>p_i$, and add an undirected edge between node $i$ and node $j$</i$></li>
<li>For every 1≤i≤n1≤i≤n, find the <strong>smallest</strong> $j$ such that $i<j≤n$ $and$ $p_j>p_i$, and add an undirected edge between node $i$ and node $j$</j≤n$></li>
</ul>
<p>In cases where no such $j$ exists, we make no edges. Also, note that we make edges between the corresponding indices, not the values at those indices.</p>
<p>For clarity, consider as an example $n=4$, and $p=[3,1,4,2]$; here, the edges of the graph are $(1,3),(2,1),(2,3),(4,3)$.</p>
<p>A permutation pp is <strong>cyclic</strong> if the graph built using pp has at least one simple cycle.</p>
<p>Given $n$, find the number of cyclic permutations of length $n$. Since the number may be very large, output it modulo $10^9+7$.</p>
<p>Please refer to the Notes section for the formal definition of a simple cycle</p>
<p><strong>Input</strong></p>
<p>The first and only line contains a single integer $n$ (3≤n≤1063≤n≤106).</p>
<p><strong>Output</strong></p>
<p>Output a single integer $0≤x&lt;10^9+7$, the number of cyclic permutations of length $n$ modulo $10^9+7$.</p>
<p><strong>Examples</strong></p>
<p>input</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">4</span><br></pre></td></tr></table></figure>
<p>output</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">16</span><br></pre></td></tr></table></figure>
<p>input</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">583291</span><br></pre></td></tr></table></figure>
<p>output</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">135712853</span><br></pre></td></tr></table></figure>
<p><strong>Note</strong></p>
<p>There are $16$ cyclic permutations for $n=4$. $[4,2,1,3]$ is one such permutation, having a cycle of length four: $4→3→2→1→4$.</p>
<p>Nodes $v_1$, $v_2$, ……, $v_k$ form a simple cycle if the following conditions hold:</p>
<ul>
<li>$k≥3$.</li>
<li>$vi≠vj$ for any pair of indices $i$ and $j$. ($1≤i&lt;j≤k$)</li>
<li>$v_i$ and $v_i+1$ share an edge for all $i$ ($1≤i&lt;k$), and $v_1$ and $v_k$ share an edge.  </li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/08/06/Codeforces-Round-661-Div-3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jiong Liu">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ljiong">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/08/06/Codeforces-Round-661-Div-3/" class="post-title-link" itemprop="url">Codeforces Round #661 (Div. 3)</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-08-06 20:00:58" itemprop="dateCreated datePublished" datetime="2020-08-06T20:00:58+08:00">2020-08-06</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-08-21 05:22:07" itemprop="dateModified" datetime="2020-08-21T05:22:07+08:00">2020-08-21</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E9%A2%98%E8%A7%A3/" itemprop="url" rel="index"><span itemprop="name">题解</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>Div. 3难度前三题还行，第四题开始什么鬼啊QAQ</p>
<p>好久没写题目了写的好慢，俩小时写三题半，学长50分钟写了三题半 </p>
<p>0.0</p>
<p>keep training~</p>
<h4 id="A-Remove-Smallest"><a href="#A-Remove-Smallest" class="headerlink" title="A. Remove Smallest"></a>A. Remove Smallest</h4><p>You are given the array $a$ consisting of $n$ positive (greater than zero) integers.</p>
<p>In one move, you can choose two indices $i$ and $j$ ($i≠j$) such that the absolute difference between $a_i$ and $a_j$ is no more than one ($|a_i−a_j|≤1$) and remove the smallest of these two elements. If two elements are equal, you can remove any of them (but exactly one).</p>
<p>Your task is to find if it is possible to obtain the array consisting of <strong>only one element</strong> using several (possibly, zero) such moves or not.</p>
<p>You have to answer $t$ independent test cases. </p>
<p><strong>Input</strong></p>
<p>The first line of the input contains one integer $t$ ($1≤t≤1000$) — the number of test cases.  Then $t$ test cases follow. </p>
<p>The first line of the test case contains one integer $n$ ($1≤n≤50$) — the length of $a$. The second line of the test case contains $n$ integers $a1,a2,…,an$ ($1≤ai≤100$), where $a_i$ is the $i$-th element of $a$.</p>
<p><strong>Output</strong></p>
<p>For each test case, print the answer: “YES” if it is possible to obtain the array consisting of <strong>only one element</strong> using several (possibly, zero) moves described in the problem statement, or “NO” otherwise.</p>
<p><strong>Example</strong></p>
<p>input</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">5</span><br><span class="line">3</span><br><span class="line">1 2 2</span><br><span class="line">4</span><br><span class="line">5 5 5 5</span><br><span class="line">3</span><br><span class="line">1 2 4</span><br><span class="line">4</span><br><span class="line">1 3 4 4</span><br><span class="line">1</span><br><span class="line">100</span><br></pre></td></tr></table></figure>
<p>output</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">YES</span><br><span class="line">YES</span><br><span class="line">NO</span><br><span class="line">NO</span><br><span class="line">YES</span><br></pre></td></tr></table></figure>
<p><strong>Note</strong></p>
<p>In the first test case of the example, we can perform the following sequence of moves:</p>
<ul>
<li>choose $i=1$ and $j=3$ and remove $a_i$ (so $a$ becomes [2;2]);</li>
<li>choose $i=1$ and $j=2$ and remove $a_j$ (so $a$ becomes [2]).</li>
</ul>
<p>In the second test case of the example, we can choose any possible $i$ and $j$ any move and it doesn’t matter which element we remove. </p>
<p>In the third test case of the example, there is no way to get rid of $2$ and $4$.</p>
<h5 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h5><p>从小到大排序，相邻两个数如果满足条件，n—。最后n=1说明就只剩一个。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> t, n, A[<span class="number">55</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">()</span></span>&#123;  <span class="comment">//打印，只是为了检查</span></span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">		<span class="built_in">cout</span>&lt;&lt;A[i]&lt;&lt;<span class="string">" "</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">cout</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="built_in">cin</span>&gt;&gt;n;</span><br><span class="line">	<span class="keyword">int</span> cnt=n; </span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">		<span class="built_in">cin</span>&gt;&gt;A[i];</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	sort(A+<span class="number">1</span>, A+n+<span class="number">1</span>); <span class="comment">//排序</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;n;i++)&#123;</span><br><span class="line">		<span class="keyword">if</span>(<span class="built_in">abs</span>(A[i]-A[i+<span class="number">1</span>])&lt;=<span class="number">1</span>) cnt--; <span class="comment">//满足条件，计数器cnt--</span></span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">if</span>(cnt!=<span class="number">1</span>) <span class="built_in">cout</span>&lt;&lt;<span class="string">"NO"</span>&lt;&lt;<span class="built_in">endl</span>;  <span class="comment">//输出</span></span><br><span class="line">	<span class="keyword">else</span> <span class="built_in">cout</span>&lt;&lt;<span class="string">"YES"</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="built_in">cin</span>&gt;&gt;t;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=t;i++) solve();</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="B-Gifts-Fixing"><a href="#B-Gifts-Fixing" class="headerlink" title="B. Gifts Fixing"></a>B. Gifts Fixing</h4><p>You have $n$ gifts and you want to give all of them to children. Of course, you don’t want to offend anyone, so all gifts should be equal between each other. The $i$-th gift consists of $a_i$ candies and $b_i$ oranges.</p>
<p>During one move, you can choose some gift $1≤i≤n$ and do one of the following operations:</p>
<ul>
<li>eat exactly <strong>one candy</strong> from this gift (decrease $a_i$ by one); </li>
<li>eat exactly <strong>one orange</strong> from this gift (decrease $b_i$ by one); </li>
<li>eat exactly <strong>one candy</strong> and exactly <strong>one orange</strong> from this gift (decrease both $a_i$ and $b_i$ by one). </li>
</ul>
<p>Of course, you can not eat a candy or orange if it’s not present in the gift (so neither $a_i$ nor $b_i$ can become less than zero). </p>
<p>As said above, all gifts should be equal. This means that after some sequence of moves the following two conditions should be satisfied: $a_1=a_2=⋯=a_n$ and $b_1=b_2=⋯=b_n$ (and $a_i$ equals $b_i$ is <strong>not necessary</strong>).</p>
<p>Your task is to find the <strong>minimum</strong> number of moves required to equalize all the given gifts.</p>
<p>You have to answer $t$ independent test cases.</p>
<p><strong>Input</strong></p>
<p>The first line of the input contains one integer $t$ ($1≤t≤1000$) — the number of test cases. Then $t$ test cases follow.</p>
<p>The first line of the test case contains one integer $n$ ($1≤n≤50$) — the number of gifts. The second line of the test case contains $n$ integers $a_1,a_2,…,a_n$ ($1≤a_i≤10^9$), where $a_i$ is the number of candies in the $i$-th gift. The third line of the test case contains $n$ integers $b_1,b_2,…,b_n$ ($1≤b_i≤10^9$), where $b_i$ is the number of oranges in the $i$-th gift.</p>
<p><strong>Output</strong></p>
<p>For each test case, print one integer: the <strong>minimum</strong> number of moves required to equalize all the given gifts.</p>
<p><strong>Example</strong></p>
<p>input</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">5</span><br><span class="line">3</span><br><span class="line">3 5 6</span><br><span class="line">3 2 3</span><br><span class="line">5</span><br><span class="line">1 2 3 4 5</span><br><span class="line">5 4 3 2 1</span><br><span class="line">3</span><br><span class="line">1 1 1</span><br><span class="line">2 2 2</span><br><span class="line">6</span><br><span class="line">1 1000000000 1000000000 1000000000 1000000000 1000000000</span><br><span class="line">1 1 1 1 1 1</span><br><span class="line">3</span><br><span class="line">10 12 8</span><br><span class="line">7 5 4</span><br></pre></td></tr></table></figure>
<p>output</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">6</span><br><span class="line">16</span><br><span class="line">0</span><br><span class="line">4999999995</span><br><span class="line">7</span><br></pre></td></tr></table></figure>
<p><strong>Note</strong></p>
<p>In the first test case of the example, we can perform the following sequence of moves:</p>
<ul>
<li>choose the first gift and eat one orange from it, so $a=[3,5,6]$ and $b=[2,2,3]$;</li>
<li>choose the second gift and eat one candy from it, so $a=[3,4,6]$ and $b=[2,2,3]$;</li>
<li>choose the second gift and eat one candy from it, so $a=[3,3,6]$ and $b=[2,2,3]$;</li>
<li>choose the third gift and eat one candy and one orange from it, so $a=[3,3,5]$ and $b=[2,2,2]$;</li>
<li>choose the third gift and eat one candy from it, so $a=[3,3,4]$ and $b=[2,2,2]$;</li>
<li>choose the third gift and eat one candy from it, so $a=[3,3,3]$ and $b=[2,2,2]$.</li>
</ul>
<h5 id="思路-1"><a href="#思路-1" class="headerlink" title="思路"></a>思路</h5><p>纯模拟，没啥好说的</p>
<p>QAQ</p>
<p>唯一一道一遍过的题目</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> t, n, A[<span class="number">55</span>], B[<span class="number">55</span>], cnt;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">()</span></span>&#123;  <span class="comment">//打印，只是为了检查</span></span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">		<span class="built_in">cout</span>&lt;&lt;A[i]&lt;&lt;<span class="string">" "</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">		<span class="built_in">cout</span>&lt;&lt;B[i]&lt;&lt;<span class="string">" "</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">cout</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="built_in">cin</span>&gt;&gt;n;</span><br><span class="line">	<span class="keyword">int</span> aMin=<span class="number">1</span>&lt;&lt;<span class="number">30</span>, bMin=<span class="number">1</span>&lt;&lt;<span class="number">30</span>;  <span class="comment">//最小值初始值为int的最大值</span></span><br><span class="line">	<span class="keyword">long</span> <span class="keyword">long</span> ans=<span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">		<span class="built_in">cin</span>&gt;&gt;A[i];</span><br><span class="line">		aMin=min(aMin, A[i]);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">		<span class="built_in">cin</span>&gt;&gt;B[i];</span><br><span class="line">		bMin=min(bMin, B[i]);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">		<span class="keyword">if</span>(A[i]&gt;aMin &amp;&amp; B[i]&gt;bMin)&#123;</span><br><span class="line">			<span class="keyword">long</span> <span class="keyword">long</span> temp=min(A[i]-aMin, B[i]-bMin);  <span class="comment">//必须用long long，不然装不下</span></span><br><span class="line">			A[i]-=temp;</span><br><span class="line">			B[i]-=temp;</span><br><span class="line">			</span><br><span class="line">			ans+=temp;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">		<span class="keyword">if</span>(A[i]&gt;aMin)&#123;</span><br><span class="line">			<span class="keyword">long</span> <span class="keyword">long</span> temp=A[i]-aMin;</span><br><span class="line">			A[i]-=temp;</span><br><span class="line">			ans+=temp;</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">if</span>(B[i]&gt;bMin)&#123;</span><br><span class="line">			<span class="keyword">long</span> <span class="keyword">long</span> temp=B[i]-bMin;</span><br><span class="line">			B[i]-=temp;</span><br><span class="line">			ans+=temp;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="built_in">cout</span>&lt;&lt;ans&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="built_in">cin</span>&gt;&gt;t;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=t;i++) solve();</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="C-Boats-Competition"><a href="#C-Boats-Competition" class="headerlink" title="C. Boats Competition"></a>C. Boats Competition</h4><p>There are $n$ people who want to participate in a boat competition. The weight of the $i$-th participant is $w_i$. Only teams consisting of <strong>two</strong> people can participate in this competition. As an organizer, you think that it’s fair to allow only teams with <strong>the same total weight</strong>. </p>
<p>So, if there are $k$ teams $(a_1,b_1)$, $(a_2,b_2)$, ……, $(a_k,b_k)$, where $a_i$ is the weight of the first participant of the $i$-th team and $bi$ is the weight of the second participant of the $i$-th team, then the condition $a_1+b_1=a_2+b_2=⋯=a_k+b_k=s$, where $s$ is the total weight of <strong>each</strong> team, should be satisfied.</p>
<p>Your task is to choose such $s$ that the number of teams people can create is the <strong>maximum</strong> possible. Note that each participant can be in <strong>no more than one</strong> team. </p>
<p>You have to answer $t$ independent test cases. </p>
<p><strong>Input</strong></p>
<p>The first line of the input contains one integer $t$ ($1≤t≤1000$) — the number of test cases. Then $t$ test cases follow. </p>
<p>The first line of the test case contains one integer $n$ ($1≤n≤50$) — the number of participants. The second line of the test case contains $n$ integers $w1,w2,…,wn$ ($1≤wi≤n$), where $w_i$ is the weight of the $i$-th participant.</p>
<p><strong>Output</strong></p>
<p>For each test case, print one integer $k$: the <strong>maximum</strong> number of teams people can compose with the total weight $s$, if you choose $s$ optimally. </p>
<p><strong>Example</strong></p>
<p>input</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">5</span><br><span class="line">5</span><br><span class="line">1 2 3 4 5</span><br><span class="line">8</span><br><span class="line">6 6 6 6 6 6 8 8</span><br><span class="line">8</span><br><span class="line">1 2 2 1 2 1 1 2</span><br><span class="line">3</span><br><span class="line">1 3 3</span><br><span class="line">6</span><br><span class="line">1 1 3 4 2 2</span><br></pre></td></tr></table></figure>
<p>output</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">1</span><br><span class="line">2</span><br></pre></td></tr></table></figure>
<p><strong>Note</strong></p>
<p>In the first test case of the example, we can reach the optimal answer for $s=6$. Then the first boat is used by participants $1$ and $5$ and the second boat is used by participants $2$ and $4$ (indices are the same as weights).</p>
<p>In the second test case of the example, we can reach the optimal answer for $s=12$. Then first $6$ participants can form $3$ pairs.</p>
<p>In the third test case of the example, we can reach the optimal answer for $s=3$. The answer is $4$ because we have $4$ participants with weight $1$ and $4$ participants with weight $2$.</p>
<p>In the fourth test case of the example, we can reach the optimal answer for $s=4$ or $s=6$.</p>
<p>In the fifth test case of the example, we can reach the optimal answer for $s=3$. Note that participant with weight $3$ can’t use the boat because there is no suitable pair for him in the list.</p>
<h5 id="思路-2"><a href="#思路-2" class="headerlink" title="思路"></a>思路</h5><p>暴力枚举</p>
<p>把所有的和数对应的组数计算出来，求最大值就解决了</p>
<p><del>tmd</del>我在求最大值的时候出了问题没检查出来卡了半小时</p>
<p>细节细节细节</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> t, n, A[<span class="number">55</span>], vis[<span class="number">55</span>];</span><br><span class="line"><span class="built_in">map</span>&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt; V;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">		<span class="built_in">cout</span>&lt;&lt;A[i]&lt;&lt;<span class="string">" "</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">cout</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">search</span><span class="params">(<span class="keyword">int</span> s)</span></span>&#123;</span><br><span class="line">	<span class="built_in">memset</span>(vis, <span class="number">0</span>, <span class="keyword">sizeof</span>(vis));</span><br><span class="line">	<span class="keyword">int</span> ans=<span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">		<span class="keyword">if</span>(vis[i]==<span class="number">1</span>) <span class="keyword">continue</span>;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j=i+<span class="number">1</span>;j&lt;=n;j++)&#123;</span><br><span class="line">			<span class="keyword">if</span>(vis[j]==<span class="number">1</span>) <span class="keyword">continue</span>;</span><br><span class="line">			<span class="keyword">if</span>(vis[i]==<span class="number">1</span>) <span class="keyword">break</span>;</span><br><span class="line">			</span><br><span class="line">			<span class="keyword">if</span>(A[i]+A[j]==s)&#123;</span><br><span class="line">				vis[i]=<span class="number">1</span>;</span><br><span class="line">				vis[j]=<span class="number">1</span>;</span><br><span class="line">				ans++;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">return</span> ans;</span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="built_in">cin</span>&gt;&gt;n;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">		<span class="built_in">cin</span>&gt;&gt;A[i];</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">int</span> ans=<span class="number">-1</span>;  <span class="comment">//没搜到ans要输出0 </span></span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j=i+<span class="number">1</span>;j&lt;=n;j++)&#123;</span><br><span class="line">			<span class="keyword">if</span>(V[A[i]+A[j]]==<span class="number">0</span>)&#123;</span><br><span class="line">				V[A[i]+A[j]]=search(A[i]+A[j]);</span><br><span class="line">				ans=max(ans, V[A[i]+A[j]]);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span>(ans&gt;<span class="number">0</span>) <span class="built_in">cout</span>&lt;&lt;ans&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">	<span class="keyword">else</span> <span class="built_in">cout</span>&lt;&lt;<span class="number">0</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">	V.clear();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="built_in">cin</span>&gt;&gt;t;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=t;i++) solve();</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/08/05/Codeforces-Round-660-Div-2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jiong Liu">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ljiong">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/08/05/Codeforces-Round-660-Div-2/" class="post-title-link" itemprop="url">Codeforces Round #660(Div. 2)</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-08-05 00:52:55" itemprop="dateCreated datePublished" datetime="2020-08-05T00:52:55+08:00">2020-08-05</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-08-21 05:22:00" itemprop="dateModified" datetime="2020-08-21T05:22:00+08:00">2020-08-21</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E9%A2%98%E8%A7%A3/" itemprop="url" rel="index"><span itemprop="name">题解</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>对于Codeforces Round #660(Div. 2) 的解题思路和一些想法</p>
<p>时隔n多年再来做比赛题目QAQ</p>
<p>感觉又弱了好多</p>
<h4 id="A-Captain-Flint-and-Crew-Recruitment"><a href="#A-Captain-Flint-and-Crew-Recruitment" class="headerlink" title="A. Captain Flint and Crew Recruitment"></a>A. Captain Flint and Crew Recruitment</h4><p><em>Despite his bad reputation, Captain Flint is a friendly person (at least, friendly to animals). Now Captain Flint is searching worthy sailors to join his new crew (solely for peaceful purposes). A sailor is considered as worthy if he can solve Flint’s task.</em></p>
<p>Recently, out of blue Captain Flint has been interested in math and even defined a new class of integers. Let’s define a positive integer $x$ as <strong>nearly prime</strong> if it can be represented as $p⋅q$, where $1&lt;p&lt;q$ and $p$ and $q$ are prime numbers. For example, integers $6$ and $10$ are nearly primes (since $2⋅3=6$ and $2⋅5=10$), but integers $1$, $3$, $4$, $16$, $17$ or $44$ are not.</p>
<p>Captain Flint guessed an integer $n$ and asked you: can you represent it as <em>the sum of 44 <strong>different positive</strong> integers</em> where <strong>at least $3$</strong> of them should be <em>nearly prime</em>.</p>
<p>Uncle Bogdan easily solved the task and joined the crew. Can you do the same?</p>
<p>Input</p>
<p>The first line contains a single integer $t$ $(1≤t≤1000)$ — the number of test cases.</p>
<p>Next $t$ lines contain test cases — one per line. The first and only line of each test case contains the single integer $n$ $(1≤n≤2⋅10^5)$ — the number Flint guessed.</p>
<p>Output</p>
<p>For each test case print:</p>
<ul>
<li>YES and $4$ <strong>different</strong> positive integers such that at least $3$ of them are nearly prime and their sum is equal to $n$ (if there are multiple answers print any of them);</li>
<li>NO if there is no way to represent $n$ as <em>the sum of $4$ <strong>different positive</strong> integers</em> where at least $3$ of them are nearly prime.</li>
</ul>
<p>You can print each character of YES or NO in any case.</p>
<p><strong>Example</strong></p>
<p>input</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">7</span><br><span class="line">7</span><br><span class="line">23</span><br><span class="line">31</span><br><span class="line">36</span><br><span class="line">44</span><br><span class="line">100</span><br><span class="line">258</span><br></pre></td></tr></table></figure>
<p>output</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">NO</span><br><span class="line">NO</span><br><span class="line">YES</span><br><span class="line">14 10 6 1</span><br><span class="line">YES</span><br><span class="line">5 6 10 15</span><br><span class="line">YES</span><br><span class="line">6 7 10 21</span><br><span class="line">YES</span><br><span class="line">2 10 33 55</span><br><span class="line">YES</span><br><span class="line">10 21 221 6</span><br></pre></td></tr></table></figure>
<p><strong>Note</strong></p>
<p>In the first and second test cases, it can be proven that there are no four different positive integers such that at least three of them are nearly prime.</p>
<p>In the third test case, $n=31=2⋅7+2⋅5+2⋅3+1$: integers $14$, $10$, $6$ are nearly prime.</p>
<p>In the fourth test case, $n=36=5+2⋅3+2⋅5+3⋅5$: integers $6$, $10$, $15$ are nearly prime.</p>
<p>In the fifth test case, $n=44=2⋅3+7+2⋅5+3⋅7$: integers $6$, $10$, $21$ are nearly prime.</p>
<p>In the sixth test case, $n=100=2+2⋅5+3⋅11+5⋅11$: integers $10$, $33$, $55$ are nearly prime.</p>
<p>In the seventh test case, $n=258=2⋅5+3⋅7+13⋅17+2⋅3$: integers $10$, $21$, $221$, $6$ are nearly prime.</p>
<h5 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h5><p>第一反应：线性筛+统计，最后输出答案</p>
<p>然而并没有那么复杂：最小的三个nearly prime分别是6，10，14，也就是说它们的和30以内是没有任何数符合条件的。对于&gt;=31的数n，就用6+10+14+k，k=n-6-10-14，如果有重复就把14换成15。</p>
<p><del>我tmd写了80多行线性筛。。。</del></p>
<p>就当是复习线性筛了。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN=<span class="number">200000</span>;</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> t, vis[MAXN+<span class="number">10</span>], cnt0, prime[MAXN+<span class="number">10</span>], collect[MAXN+<span class="number">10</span>], cnt1, flag, <span class="built_in">list</span>[MAXN+<span class="number">10</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;  <span class="comment">//三层循环分别是前三个nearly-prime，最后判断第四个数</span></span><br><span class="line">	<span class="keyword">int</span> startPos=<span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=startPos;i&lt;cnt1;i++)&#123;</span><br><span class="line">		<span class="keyword">if</span>(flag==<span class="number">1</span>) <span class="keyword">return</span>;  <span class="comment">//各种优化，下面同理</span></span><br><span class="line">		<span class="keyword">if</span>(<span class="built_in">list</span>[i]&gt;=x) <span class="keyword">return</span>;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j=startPos+<span class="number">1</span>;j&lt;cnt1;j++)&#123;</span><br><span class="line">			<span class="keyword">if</span>(flag==<span class="number">1</span>) <span class="keyword">return</span>;</span><br><span class="line">			<span class="keyword">if</span>(<span class="built_in">list</span>[i]+<span class="built_in">list</span>[j]&gt;=x) <span class="keyword">return</span>;</span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> k=startPos+<span class="number">2</span>;k&lt;cnt1;k++)&#123;</span><br><span class="line">				<span class="keyword">if</span>(<span class="built_in">list</span>[i]+<span class="built_in">list</span>[j]+<span class="built_in">list</span>[k]&gt;=x) <span class="keyword">return</span>;</span><br><span class="line">				<span class="keyword">if</span>(flag==<span class="number">1</span>) <span class="keyword">return</span>;</span><br><span class="line">				</span><br><span class="line">				<span class="keyword">if</span>(i==j || j==k || k==i) <span class="keyword">continue</span>;</span><br><span class="line">                </span><br><span class="line">				<span class="keyword">if</span>(x-<span class="built_in">list</span>[i]-<span class="built_in">list</span>[j]-<span class="built_in">list</span>[k]&gt;<span class="number">0</span>)&#123;</span><br><span class="line">					<span class="keyword">int</span> ans=x-<span class="built_in">list</span>[i]-<span class="built_in">list</span>[j]-<span class="built_in">list</span>[k];  <span class="comment">//第4个数</span></span><br><span class="line">					<span class="keyword">if</span>(ans!=<span class="built_in">list</span>[i] &amp;&amp; ans!=<span class="built_in">list</span>[j] &amp;&amp; ans!=<span class="built_in">list</span>[k]) &#123; <span class="comment">//判重</span></span><br><span class="line">						<span class="built_in">cout</span>&lt;&lt;<span class="string">"YES"</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">						<span class="built_in">cout</span>&lt;&lt;<span class="built_in">list</span>[i]&lt;&lt;<span class="string">" "</span>&lt;&lt;<span class="built_in">list</span>[j]&lt;&lt;<span class="string">" "</span>&lt;&lt;<span class="built_in">list</span>[k]&lt;&lt;<span class="string">" "</span>&lt;&lt;ans&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">						flag=<span class="number">1</span>;</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="built_in">cin</span>&gt;&gt;t;</span><br><span class="line">    <span class="comment">//--------开筛---------</span></span><br><span class="line">	vis[<span class="number">0</span>]=<span class="number">1</span>;</span><br><span class="line">	vis[<span class="number">1</span>]=<span class="number">1</span>;</span><br><span class="line">	cnt0=<span class="number">-1</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">2</span>;i&lt;=MAXN;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(!vis[i])</span><br><span class="line">            prime[++cnt0]=i;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=cnt0;j++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(i*prime[j]&gt;MAXN) <span class="keyword">break</span>;</span><br><span class="line">            vis[i*prime[j]]=<span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span>(i % prime[j] == <span class="number">0</span>) <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">	<span class="comment">//---------统计nearly-prime---------</span></span><br><span class="line">	cnt1=<span class="number">-1</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;=cnt0;i++)&#123;</span><br><span class="line">		<span class="keyword">if</span>(prime[i]!=<span class="number">2</span> &amp;&amp; prime[i]%<span class="number">2</span>==<span class="number">0</span>) <span class="keyword">continue</span>;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;=cnt0;j++)&#123;</span><br><span class="line">			<span class="keyword">if</span>(prime[j]!=<span class="number">2</span> &amp;&amp; prime[j]%<span class="number">2</span>==<span class="number">0</span>) <span class="keyword">continue</span>;</span><br><span class="line">			<span class="keyword">if</span>(i==j) <span class="keyword">continue</span>;</span><br><span class="line">			<span class="keyword">int</span> ans=prime[i]*prime[j];</span><br><span class="line">			<span class="keyword">if</span>(ans&gt;MAXN) <span class="keyword">break</span>;</span><br><span class="line">			collect[ans]=<span class="number">1</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;=MAXN;i++)&#123;</span><br><span class="line">		<span class="keyword">if</span>(collect[i]==<span class="number">1</span>) <span class="built_in">list</span>[++cnt1]=i;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">    <span class="comment">//统计答案</span></span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=t;i++)&#123;</span><br><span class="line">		<span class="keyword">int</span> temp;</span><br><span class="line">		<span class="built_in">cin</span>&gt;&gt;temp;</span><br><span class="line">		solve(temp);</span><br><span class="line">		<span class="keyword">if</span>(flag==<span class="number">0</span>) <span class="built_in">cout</span>&lt;&lt;<span class="string">"NO"</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">		flag=<span class="number">0</span>;</span><br><span class="line">	&#125; </span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="B-Captain-Flint-and-a-Long-Voyage"><a href="#B-Captain-Flint-and-a-Long-Voyage" class="headerlink" title="B. Captain Flint and a Long Voyage"></a>B. Captain Flint and a Long Voyage</h4><p><em>Captain Flint and his crew keep heading to a savage shore of Byteland for several months already, drinking rum and telling stories. In such moments uncle Bogdan often remembers his nephew Denis. Today, he has told a story about how Denis helped him to come up with an interesting problem and asked the crew to solve it.</em></p>
<p>In the beginning, uncle Bogdan wrote on a board a positive integer $x$ consisting of $n$ digits. After that, he wiped out $x$ and wrote integer $k$ instead, which was the concatenation of binary representations of digits $x$ consists of (without leading zeroes). For example, let $x=729$, then $k=111101001$ (since $7=111$, $2=10$, $9=1001$).</p>
<p>After some time, uncle Bogdan understood that he doesn’t know what to do with $k$ and asked Denis to help. Denis decided to wipe last $n$ digits of $k$ and named the new number as $r$.</p>
<p>As a result, Denis proposed to find such integer $x$ of length $n$ that $r$ (as number) is maximum possible. If there are multiple valid $x$ then Denis is interested in the minimum one.</p>
<p>All crew members, including captain Flint himself, easily solved the task. All, except cabin boy Kostya, who was too drunk to think straight. But what about you?</p>
<p>Note: in this task, we compare integers ($x$ or $k$) as numbers (despite what representations they are written in), so $729&lt;1999$ or $111&lt;1000$.</p>
<p><strong>Input</strong></p>
<p>The first line contains a single integer $t$ ($1≤t≤1000$) — the number of test cases.</p>
<p>Next $t$ lines contain test cases — one per test case. The one and only line of each test case contains the single integer $n$ ($1≤n≤10^5$) — the length of the integer $x$ you need to find.</p>
<p>It’s guaranteed that the sum of $n$ from all test cases doesn’t exceed $2⋅10^5$.</p>
<p><strong>Output</strong></p>
<p>For each test case, print the minimum integer $x$ of length $n$ such that obtained by Denis number $r$ is maximum possible.</p>
<p><strong>Example</strong></p>
<p>input</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">2</span><br><span class="line">1</span><br><span class="line">3</span><br></pre></td></tr></table></figure>
<p>output</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">8</span><br><span class="line">998</span><br></pre></td></tr></table></figure>
<p><strong>Note</strong></p>
<p>In the second test case (with $n=3$), if uncle Bogdan had $x=998$ then $k=100110011000$. Denis (by wiping last $n=3$ digits) will obtain $r=100110011$.</p>
<p>It can be proved that the 100110011100110011 is the maximum possible $r$ Denis can obtain and 998998 is the minimum $x$ to obtain it.</p>
<h5 id="思路-1"><a href="#思路-1" class="headerlink" title="思路"></a>思路</h5><p>因为比较是按照数字的方式比较，所以位数多的数一定大，所以要最大只能用$9=1001$和$8=1000$来占位。然后尾部要被抹掉的位置用8来使相同答案中最小的数。位数是4的倍数的时候要特判。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n, t;</span><br><span class="line"><span class="built_in">string</span> ans=<span class="string">""</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="built_in">cin</span>&gt;&gt;t;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=t;j++)&#123;</span><br><span class="line">		<span class="built_in">cin</span>&gt;&gt;n;</span><br><span class="line">		<span class="keyword">switch</span>(n%<span class="number">4</span>)&#123;</span><br><span class="line">			<span class="keyword">case</span> <span class="number">0</span>:&#123;</span><br><span class="line">				<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n-n/<span class="number">4</span>;i++) ans+=<span class="string">'9'</span>;</span><br><span class="line">				<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n/<span class="number">4</span>;i++) ans+=<span class="string">'8'</span>;</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">default</span>:&#123;</span><br><span class="line">				<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n-n/<span class="number">4</span><span class="number">-1</span>;i++) ans+=<span class="string">'9'</span>;</span><br><span class="line">				<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n/<span class="number">4</span>+<span class="number">1</span>;i++) ans+=<span class="string">'8'</span>;</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">			</span><br><span class="line">		<span class="built_in">cout</span>&lt;&lt;ans&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">		ans.clear();</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="C-Uncle-Bogdan-and-Country-Happiness"><a href="#C-Uncle-Bogdan-and-Country-Happiness" class="headerlink" title="C. Uncle Bogdan and Country Happiness"></a>C. Uncle Bogdan and Country Happiness</h4><p><em>Uncle Bogdan is in captain Flint’s crew for a long time and sometimes gets nostalgic for his homeland. Today he told you how his country introduced a happiness index.</em></p>
<p>There are $n$ cities and $n−1$ undirected roads connecting pairs of cities. Citizens of any city can reach any other city traveling by these roads. Cities are numbered from 11 to $n$ and the city 11 is a capital. In other words, the country has a tree structure.</p>
<p>There are $m$ citizens living in the country. A $p_i$ people live in the $i$-th city but all of them are working in the capital. At evening all citizens return to their home cities using the shortest paths.</p>
<p>Every person has its own mood: somebody leaves his workplace in good mood but somebody are already in bad mood. Moreover any person can ruin his mood on the way to the hometown. <strong>If person is in bad mood he won’t improve it</strong>.</p>
<p>Happiness detectors are installed in each city to monitor the happiness of <strong>each</strong> person who visits the city. The detector in the $i$-th city calculates a happiness index $h_i$ as the number of people in good mood minus the number of people in bad mood. Let’s say for the simplicity that <em>mood of a person doesn’t change inside the city</em>.</p>
<p>Happiness detector is still in development, so there is a probability of a mistake in judging a person’s happiness. One late evening, when all citizens successfully returned home, the government asked uncle Bogdan (the best programmer of the country) to check the correctness of the collected happiness indexes.</p>
<p>Uncle Bogdan successfully solved the problem. Can you do the same?</p>
<p>More formally, <em>You need to check: “Is it possible that, after all people return home, for each city $i$ the happiness index will be equal exactly to $h_i$”.</em></p>
<p><strong>Input</strong></p>
<p>The first line contains a single integer $t$ (1≤t≤100001≤t≤10000) — the number of test cases.</p>
<p>The first line of each test case contains two integers $n$ and $m$ ($1≤n≤10^5$; $0≤m≤10^9$) — the number of cities and citizens.</p>
<p>The second line of each test case contains $n$ integers p1,p2,…,pnp1,p2,…,pn ($0≤pi≤m$; $p_1+p_2+…+p_n=m$), where $p_i$ is the number of people living in the $i$-th city.</p>
<p>The third line contains $n$ integers $h_1,h_2,…,h_n$ ($−10^9≤h_i≤10^9$), where $h_i$ is the calculated happiness index of the $i$-th city.</p>
<p>Next $n−1$ lines contain description of the roads, one per line. Each line contains two integers $x_i$ and $y_i$ ($1≤x_i,y_i≤n$; $x_i≠y_i$), where xixi and yiyi are cities connected by the $i$-th road.</p>
<p>It’s guaranteed that the sum of $n$ from all test cases doesn’t exceed $2⋅10^5$.</p>
<p><strong>Output</strong></p>
<p>For each test case, print YES, if the collected data is correct, or NO — otherwise. You can print characters in YES or NO in any case.</p>
<p><strong>Examples</strong></p>
<p>input</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">2</span><br><span class="line">7 4</span><br><span class="line">1 0 1 1 0 1 0</span><br><span class="line">4 0 0 -1 0 -1 0</span><br><span class="line">1 2</span><br><span class="line">1 3</span><br><span class="line">1 4</span><br><span class="line">3 5</span><br><span class="line">3 6</span><br><span class="line">3 7</span><br><span class="line">5 11</span><br><span class="line">1 2 5 2 1</span><br><span class="line">-11 -2 -6 -2 -1</span><br><span class="line">1 2</span><br><span class="line">1 3</span><br><span class="line">1 4</span><br><span class="line">3 5</span><br></pre></td></tr></table></figure>
<p>output</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">YES</span><br><span class="line">YES</span><br></pre></td></tr></table></figure>
<p>input</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">2</span><br><span class="line">4 4</span><br><span class="line">1 1 1 1</span><br><span class="line">4 1 -3 -1</span><br><span class="line">1 2</span><br><span class="line">1 3</span><br><span class="line">1 4</span><br><span class="line">3 13</span><br><span class="line">3 3 7</span><br><span class="line">13 1 4</span><br><span class="line">1 2</span><br><span class="line">1 3</span><br></pre></td></tr></table></figure>
<p>output</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">NO</span><br><span class="line">NO</span><br></pre></td></tr></table></figure>
<p><strong>Note</strong></p>
<p>more see: <a href="https://codeforces.com/contest/1388/problem/C" target="_blank" rel="noopener">https://codeforces.com/contest/1388/problem/C</a></p>
<h5 id="思路-2"><a href="#思路-2" class="headerlink" title="思路"></a>思路</h5><p>从根节点开始遍历，计算子节点的happy和bad人数是否符合条件，如果不符合条件直接退出。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> t, n, m, flag;</span><br><span class="line"><span class="keyword">int</span> P[<span class="number">100010</span>], H[<span class="number">100010</span>], vis[<span class="number">100010</span>];</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">city</span>&#123;</span></span><br><span class="line">	<span class="keyword">int</span> citz, citzAll;</span><br><span class="line">	<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; pathTo;</span><br><span class="line">&#125;C[<span class="number">100010</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">init</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;  <span class="comment">//初始化图，保证从根节点到叶子节点是单向的</span></span><br><span class="line">	C[x].citzAll=<span class="number">0</span>;</span><br><span class="line">	<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; tempV;</span><br><span class="line">	</span><br><span class="line">	vis[x]=<span class="number">1</span>;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;C[x].pathTo.size();i++)&#123;</span><br><span class="line">		<span class="keyword">if</span>(vis[C[x].pathTo[i]]==<span class="number">0</span>)&#123;</span><br><span class="line">			tempV.push_back(C[x].pathTo[i]);</span><br><span class="line">			C[x].citzAll+=init(C[x].pathTo[i]);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125; </span><br><span class="line">	C[x].citzAll+=C[x].citz;</span><br><span class="line">	C[x].pathTo=tempV;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">return</span> C[x].citzAll;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">()</span></span>&#123;  <span class="comment">//输出打印，只是为了让检查</span></span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">		<span class="built_in">cout</span>&lt;&lt;i&lt;&lt;<span class="string">"--&gt;"</span>&lt;&lt;C[i].pathTo.size()&lt;&lt;<span class="string">"|| "</span>&lt;&lt;C[i].citzAll&lt;&lt;<span class="string">" "</span>;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;C[i].pathTo.size();j++)&#123;</span><br><span class="line">			<span class="built_in">cout</span>&lt;&lt;C[i].pathTo[j]&lt;&lt;<span class="string">" "</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="built_in">cout</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> happy)</span></span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(flag!=<span class="number">0</span>) &#123;  <span class="comment">//如果有一个地方不符合直接退出</span></span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">if</span>(C[x].pathTo.size()==<span class="number">0</span>) <span class="keyword">return</span>;  <span class="comment">//如果没有能继续走的子节点就返回</span></span><br><span class="line">	</span><br><span class="line">	<span class="keyword">int</span> hNum=happy, bNum=C[x].citzAll-happy; <span class="comment">//根节点的happy和bad人数</span></span><br><span class="line">	<span class="keyword">int</span> bReq=<span class="number">0</span>, hReq=<span class="number">0</span>;</span><br><span class="line">	<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; tempH;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;C[x].pathTo.size();i++)&#123;</span><br><span class="line">		<span class="keyword">int</span> b=<span class="number">0</span>, h=<span class="number">0</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//wrong，除不尽</span></span><br><span class="line">		<span class="keyword">if</span>((C[C[x].pathTo[i]].citzAll+H[C[x].pathTo[i]]) % <span class="number">2</span> !=<span class="number">0</span>) flag=<span class="number">1</span>; </span><br><span class="line">		</span><br><span class="line">		h=(C[C[x].pathTo[i]].citzAll+H[C[x].pathTo[i]])/<span class="number">2</span>;</span><br><span class="line">		b=(C[C[x].pathTo[i]].citzAll-H[C[x].pathTo[i]])/<span class="number">2</span>;</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">if</span>(h&lt;<span class="number">0</span> || b&lt;<span class="number">0</span>) flag=<span class="number">2</span>; <span class="comment">//wrong，出现负数</span></span><br><span class="line">		tempH.push_back(h);</span><br><span class="line">		</span><br><span class="line">		bReq+=b;</span><br><span class="line">		hReq+=h;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">    <span class="comment">//判断：总数不能变，happy人数不能增加</span></span><br><span class="line">	<span class="keyword">if</span>((hNum+bNum-C[x].citz)==(hReq+bReq) &amp;&amp; hReq&lt;=hNum)&#123;  </span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;C[x].pathTo.size();i++)&#123;</span><br><span class="line">			dfs(C[x].pathTo[i], tempH[i]);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;<span class="keyword">else</span> flag=<span class="number">3</span>;</span><br><span class="line">&#125; </span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="built_in">cin</span>&gt;&gt;n&gt;&gt;m;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) <span class="built_in">cin</span>&gt;&gt;C[i].citz;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) <span class="built_in">cin</span>&gt;&gt;H[i];</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++) C[i].pathTo.clear();</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n<span class="number">-1</span>;i++)&#123;</span><br><span class="line">		<span class="keyword">int</span> a=<span class="number">0</span>, b=<span class="number">0</span>;</span><br><span class="line">		<span class="built_in">cin</span>&gt;&gt;a&gt;&gt;b;</span><br><span class="line">		C[a].pathTo.push_back(b);</span><br><span class="line">		C[b].pathTo.push_back(a);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	init(<span class="number">1</span>);  <span class="comment">//从根节点开始初始化</span></span><br><span class="line">    <span class="comment">//对根节点进行判断</span></span><br><span class="line">	<span class="keyword">if</span>((C[<span class="number">1</span>].citzAll+H[<span class="number">1</span>]) % <span class="number">2</span> !=<span class="number">0</span>) flag=<span class="number">1</span>;  </span><br><span class="line">	<span class="keyword">int</span> h=(C[<span class="number">1</span>].citzAll+H[<span class="number">1</span>])/<span class="number">2</span>, b=(C[<span class="number">1</span>].citzAll-H[<span class="number">1</span>])/<span class="number">2</span>;</span><br><span class="line">	<span class="keyword">if</span>(h&lt;<span class="number">0</span> || b&lt;<span class="number">0</span>) flag=<span class="number">2</span>;</span><br><span class="line">	dfs(<span class="number">1</span>, h);<span class="comment">//开始遍历</span></span><br><span class="line">    </span><br><span class="line">	<span class="keyword">if</span>(flag==<span class="number">0</span>) <span class="built_in">cout</span>&lt;&lt;<span class="string">"YES"</span>&lt;&lt;<span class="built_in">endl</span>;<span class="comment">//如果没问题输出“YES”</span></span><br><span class="line">	<span class="keyword">else</span> <span class="built_in">cout</span>&lt;&lt;<span class="string">"NO"</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">	</span><br><span class="line">    <span class="comment">//重置</span></span><br><span class="line">	flag=<span class="number">0</span>; </span><br><span class="line">	<span class="built_in">memset</span>(vis, <span class="number">0</span>, <span class="keyword">sizeof</span>(vis));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="built_in">cin</span>&gt;&gt;t;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=t;i++)&#123;</span><br><span class="line">		solve();</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="D-Captain-Flint-and-Treasure（存在问题）"><a href="#D-Captain-Flint-and-Treasure（存在问题）" class="headerlink" title="D. Captain Flint and Treasure（存在问题）"></a>D. Captain Flint and Treasure（存在问题）</h4><p><em>Captain Fint is involved in another treasure hunt, but have found only one strange problem. The problem may be connected to the treasure’s location or may not. That’s why captain Flint decided to leave the solving the problem to his crew and offered an absurdly high reward: one day off. The problem itself sounds like this…</em></p>
<p>There are two arrays $a$ and $b$ of length $n$. Initially, an ansans is equal to $0$ and the following operation is defined:</p>
<ol>
<li>Choose position $i$ ($1≤i≤n$);</li>
<li>Add $a_i$ to $ans$;</li>
<li>If $b_i≠−1$ then add $a_i$ to $a_{b_i}$.</li>
</ol>
<p>What is the maximum ansans you can get by performing the operation on each $i$ (1≤i≤n1≤i≤n) <em>exactly once</em>?</p>
<p>Uncle Bogdan is eager to get the reward, so he is asking your help to find the optimal order of positions to perform the operation on them.</p>
<p>Input</p>
<p>The first line contains the integer $n$ ($1≤n≤2⋅10^5$) — the length of arrays $a$ and $b$.</p>
<p>The second line contains $n$ integers $a_1,a_2,…,a_n$ ($−10^6≤a_i≤10^6$).</p>
<p>The third line contains $n$ integers $b_1,b_2,…,b_n$ ($1≤bi≤n$ or $b_i=−1$).</p>
<p><strong>Additional constraint: it’s guaranteed that for any $i$ ($1≤i≤n$) the sequence $b_i,b_{b_i},b_{b{b_i}},…$ is not cyclic, in other words it will always end with $−1$.</strong></p>
<p><strong>Output</strong></p>
<p>In the first line, print the maximum $ans$ you can get.</p>
<p>In the second line, print the order of operations: $n$ different integers $p_1,p_2,…,p_n$ ($1≤pi≤n$). The $p_i$ is the position which should be chosen at the $i$-th step. If there are multiple orders, print any of them.</p>
<p><strong>Examples</strong></p>
<p>input</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">3</span><br><span class="line">1 2 3</span><br><span class="line">2 3 -1</span><br></pre></td></tr></table></figure>
<p>output</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">10</span><br><span class="line">1 2 3</span><br></pre></td></tr></table></figure>
<p>input</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">2</span><br><span class="line">-1 100</span><br><span class="line">2 -1</span><br></pre></td></tr></table></figure>
<p>output</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">99</span><br><span class="line">2 1</span><br></pre></td></tr></table></figure>
<p>input</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">10</span><br><span class="line">-10 -1 2 2 5 -2 -3 -4 2 -6</span><br><span class="line">-1 -1 2 2 -1 5 5 7 7 9</span><br></pre></td></tr></table></figure>
<p>output</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-9</span><br><span class="line">3 5 6 1 9 4 10 7 8 2</span><br></pre></td></tr></table></figure>
<h5 id="思路-3"><a href="#思路-3" class="headerlink" title="思路"></a>思路</h5><p>我用拓扑排序来遍历所有节点。</p>
<p>拿最后一个测试样例来说，建好图应该是一个DAG</p>
<p><img src="/2020/08/05/Codeforces-Round-660-Div-2/1.png" alt></p>
<p>一个负数的节点指向的节点一定要在这个节点之后更新，比如10号节点必须在9号节点之后更新。需要等待更新的节点最后更新也没问题。</p>
<p>每次遍历从出度为零的点开始dfs，这样计算的时候就是从底部依次返回。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN=<span class="number">200010</span>;</span><br><span class="line"><span class="keyword">int</span> n, A[MAXN], B[MAXN], outd[MAXN], ans;</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; pathTo[MAXN], <span class="built_in">list</span>, tempV;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(pathTo[x].size()==<span class="number">0</span>) <span class="keyword">return</span>; <span class="comment">//没有子节点，返回</span></span><br><span class="line">	</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;pathTo[x].size();i++)&#123;</span><br><span class="line">		dfs(pathTo[x][i]);  <span class="comment">//先更新子节点</span></span><br><span class="line">		<span class="keyword">int</span> son=A[pathTo[x][i]];</span><br><span class="line">		<span class="keyword">if</span>(son&lt;<span class="number">0</span>)&#123;</span><br><span class="line">			tempV.push_back(pathTo[x][i]); <span class="comment">//是个负数，要等待其他节点更新，最后再加 </span></span><br><span class="line">		&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">			A[x]+=son;</span><br><span class="line">			ans+=son;</span><br><span class="line">			<span class="built_in">list</span>.push_back(pathTo[x][i]);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">()</span></span>&#123;  <span class="comment">//打印图，只是为了检查</span></span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">		<span class="built_in">cout</span>&lt;&lt;i&lt;&lt;<span class="string">"--&gt;"</span>;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;pathTo[i].size();j++)&#123;</span><br><span class="line">			<span class="built_in">cout</span>&lt;&lt;pathTo[i][j]&lt;&lt;<span class="string">" "</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="built_in">cout</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="built_in">cin</span>&gt;&gt;n;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">		<span class="built_in">cin</span>&gt;&gt;A[i];</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">		<span class="keyword">int</span> temp;</span><br><span class="line">		<span class="built_in">cin</span>&gt;&gt;temp;</span><br><span class="line">		<span class="keyword">if</span>(temp==<span class="number">-1</span>) <span class="keyword">continue</span>;</span><br><span class="line">		pathTo[temp].push_back(i);</span><br><span class="line">		outd[i]++;<span class="comment">//统计出度</span></span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; start;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">		<span class="keyword">if</span>(outd[i]==<span class="number">0</span>) &#123;  <span class="comment">//统计起点</span></span><br><span class="line">			start.push_back(i);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;start.size();i++)&#123;  <span class="comment">//第一轮更新</span></span><br><span class="line">		dfs(start[i]);</span><br><span class="line">		ans+=A[start[i]];</span><br><span class="line">		<span class="built_in">list</span>.push_back(start[i]);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;tempV.size();i++)&#123;  <span class="comment">//更新要等待的节点</span></span><br><span class="line">		ans+=A[tempV[i]];</span><br><span class="line">		<span class="built_in">list</span>.push_back(tempV[i]);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="built_in">cout</span>&lt;&lt;ans&lt;&lt;<span class="built_in">endl</span>;  <span class="comment">//输出</span></span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="built_in">list</span>.size();i++)&#123;</span><br><span class="line">		<span class="built_in">cout</span>&lt;&lt;<span class="built_in">list</span>[i]&lt;&lt;<span class="string">" "</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/08/05/%E5%A6%82%E4%BD%95%E5%9C%A8hexo%E6%A1%86%E6%9E%B6%E7%9A%84%E5%8D%9A%E5%AE%A2%E4%B8%AD%E4%BD%BF%E7%94%A8mathjax/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jiong Liu">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ljiong">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/08/05/%E5%A6%82%E4%BD%95%E5%9C%A8hexo%E6%A1%86%E6%9E%B6%E7%9A%84%E5%8D%9A%E5%AE%A2%E4%B8%AD%E4%BD%BF%E7%94%A8mathjax/" class="post-title-link" itemprop="url">如何在hexo框架的博客中使用mathjax</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-08-05 00:11:33 / 修改时间：06:41:54" itemprop="dateCreated datePublished" datetime="2020-08-05T00:11:33+08:00">2020-08-05</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%95%99%E7%A8%8B/" itemprop="url" rel="index"><span itemprop="name">教程</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>Hexo框架原生的渲染引擎Marked不支持Mathjax的渲染，但是这又怎么挡得住万能的Informatiker呢？</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2020/08/05/%E5%A6%82%E4%BD%95%E5%9C%A8hexo%E6%A1%86%E6%9E%B6%E7%9A%84%E5%8D%9A%E5%AE%A2%E4%B8%AD%E4%BD%BF%E7%94%A8mathjax/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/08/04/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E5%A4%9A%E7%BA%BF%E7%A8%8B/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jiong Liu">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ljiong">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/08/04/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E5%A4%9A%E7%BA%BF%E7%A8%8B/" class="post-title-link" itemprop="url">Java学习笔记-多线程</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-08-04 23:20:39" itemprop="dateCreated datePublished" datetime="2020-08-04T23:20:39+08:00">2020-08-04</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-09-20 22:16:52" itemprop="dateModified" datetime="2020-09-20T22:16:52+08:00">2020-09-20</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" itemprop="url" rel="index"><span itemprop="name">Java学习笔记</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><strong>Tipp：代码中的注释一定要看</strong></p>
<h3 id="基本概念：程序-进程-线程"><a href="#基本概念：程序-进程-线程" class="headerlink" title="基本概念：程序 进程 线程"></a>基本概念：程序 进程 线程</h3><h4 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h4><ul>
<li><strong>程序（program）</strong>是为完成特定任务、用某种语言编写 的一 组指令的集合 。即指<strong>一段静态的代码</strong>，静态对象。</li>
<li><strong>进程（process）</strong>是程序的一次执行过程，或是<strong>正在运行的一个程序</strong>。是一个动态的过程：有它自身的产生、存在和消亡的过程。——生命周期</li>
<li><ul>
<li>如运行中的QQ，运行中的MP3播放器</li>
<li>程序是静态的，进程是动态的</li>
<li><strong>进程作为资源分配的单位</strong>，系统在运行时会为每个进程分配不同的内存区域</li>
</ul>
</li>
<li><strong>线程（thread）</strong>进程可进一步细化为线程，是一个<strong>程序内部的执行路径</strong>。</li>
<li><ul>
<li>若一个进程同一时间<strong>并行</strong>执行多个线程，就是支持多线程的</li>
<li><strong>线程作为调度和执行的单位，每一个线程拥有独立的运行栈和程序计数器（pc）</strong>，线程切换的开销小</li>
<li>一个进程的多个线程共享相同的内存单元/内存地址空间—&gt;它们从同一堆中分配对象，可以访问相同的变量和对象。这就使得线程间通信更简便、高效。但多个线程操作共享的系统资源可能就会带来<strong>安全隐患</strong></li>
</ul>
</li>
</ul>
<h4 id="线程与进程的关系"><a href="#线程与进程的关系" class="headerlink" title="线程与进程的关系"></a>线程与进程的关系</h4><p><img src="/2020/08/04/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E5%A4%9A%E7%BA%BF%E7%A8%8B/进程与线程.png" alt="进程与线程的关系"></p>
<h4 id="单核CPU和多核CPU的理解"><a href="#单核CPU和多核CPU的理解" class="headerlink" title="单核CPU和多核CPU的理解"></a>单核CPU和多核CPU的理解</h4><ul>
<li>单核CPU，其实是一种假的多线程，因为在一个时间单元内，也只能执行一个线程的任务。但是CPU的时间单元特别短，因此感受不出来。</li>
<li>多核才能更好发挥多线程的效率。</li>
<li>一个Java的应用程序java.exe，其实至少有3个线程：main()主线程，gc()垃圾回收线程，异常处理线程。如果发生异常回影响到main()主线程。</li>
</ul>
<h4 id="并行与并发"><a href="#并行与并发" class="headerlink" title="并行与并发"></a>并行与并发</h4><ul>
<li>并行：多个CPU同时执行多个任务。</li>
<li>并发：一个CPU（采用时间片）同时执行多个任务。</li>
</ul>
<h4 id="何时需要多线程"><a href="#何时需要多线程" class="headerlink" title="何时需要多线程"></a>何时需要多线程</h4><ul>
<li>程序需要同时执行两个或者多个任务。</li>
<li>程序需要实现一些需要等待的任务，如用户输入、文件读写操作、网络操作、搜索等。</li>
<li>需要一些后台运行的程序。</li>
</ul>
<h3 id="线程的创建和使用（重点）"><a href="#线程的创建和使用（重点）" class="headerlink" title="线程的创建和使用（重点）"></a>线程的创建和使用（重点）</h3><p>Java语言的JVM允许程序运行多个线程，它通过java.lang.Thread类来实现。</p>
<p>Thread类的特性：</p>
<ul>
<li>每个线程都是通过某个特定Thread对象的run()方法来完成操作的，经常把urn()方法的主题称为<strong>线程体</strong>。</li>
<li>通过该Thread对象的start()方法来启动这个线程，而非直接调用run()。</li>
</ul>
<h4 id="多线程的创建方式"><a href="#多线程的创建方式" class="headerlink" title="多线程的创建方式"></a>多线程的创建方式</h4><h5 id="方式一：继承Thread类"><a href="#方式一：继承Thread类" class="headerlink" title="方式一：继承Thread类"></a>方式一：继承Thread类</h5><p>1、创建一个继承Thread类的子类</p>
<p>2、重写Thread类的run()方法</p>
<p>3、创建Thread类的子类的对象</p>
<p>4、通过此对象调用start()</p>
<p>&nbsp;</p>
<p>下面通过一个例子来演示方式一：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> ThreadTest;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 多线程创建方式一：继承Thread类</span></span><br><span class="line"><span class="comment"> * 1. 创建一个继承于Thread类的子类</span></span><br><span class="line"><span class="comment"> * 2. 重写run()方法 --&gt;将此线程执行的操作声明在run()中</span></span><br><span class="line"><span class="comment"> * 3. 创建子类的对象</span></span><br><span class="line"><span class="comment"> * 4. 通过此对象调用start()</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * 例子：遍历100以内所有的偶数</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ThreadCreate1</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//3.创建子类的对象</span></span><br><span class="line">        MyThread myThread1 = <span class="keyword">new</span> MyThread();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//4.通过此对象调用start()</span></span><br><span class="line">        <span class="comment">//作用</span></span><br><span class="line">        <span class="comment">//1.启动当前线程</span></span><br><span class="line">        <span class="comment">//2.JVM调用run()方法</span></span><br><span class="line">        myThread1.start();</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//问题一：不能通过调用run()方法启动线程</span></span><br><span class="line">        <span class="comment">//myThread.run();</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//问题二：再启动一个线程，遍历100以内偶数不可以让已经start()的线程去执行。</span></span><br><span class="line">        <span class="comment">//myThread.start();</span></span><br><span class="line">        <span class="comment">//正确方式</span></span><br><span class="line">        MyThread myThread2 = <span class="keyword">new</span> MyThread();</span><br><span class="line">        myThread2.start();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//以下循环仍然在main线程中运行</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= <span class="number">100</span>; i++) &#123;</span><br><span class="line">            <span class="comment">//if(i % 2 == 1) System.out.println("main-&gt;"+i);</span></span><br><span class="line">            <span class="keyword">if</span>(i % <span class="number">2</span> == <span class="number">0</span>) System.out.println(Thread.currentThread().getName()+<span class="string">" : "</span>+i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//1. 创建一个继承于Thread类的子类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyThread</span> <span class="keyword">extends</span> <span class="title">Thread</span></span>&#123;</span><br><span class="line">    <span class="comment">//2. 重写run()方法</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= <span class="number">100</span>; i++) &#123;</span><br><span class="line">            <span class="comment">//if(i % 2 == 0) System.out.println("myThread-&gt;"+i);</span></span><br><span class="line">            <span class="keyword">if</span>(i % <span class="number">2</span> == <span class="number">0</span>) System.out.println(Thread.currentThread().getName()+<span class="string">" : "</span>+i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>我的输出如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br></pre></td><td class="code"><pre><span class="line">Thread-3 : 0</span><br><span class="line">main : 0</span><br><span class="line">Thread-3 : 2</span><br><span class="line">Thread-4 : 0</span><br><span class="line">Thread-3 : 4</span><br><span class="line">main : 2</span><br><span class="line">Thread-4 : 2</span><br><span class="line">main : 4</span><br><span class="line">Thread-3 : 6</span><br><span class="line">Thread-4 : 4</span><br><span class="line">Thread-3 : 8</span><br><span class="line">main : 6</span><br><span class="line">Thread-3 : 10</span><br><span class="line">main : 8</span><br><span class="line">Thread-4 : 6</span><br><span class="line">Thread-3 : 12</span><br><span class="line">main : 10</span><br><span class="line">Thread-3 : 14</span><br><span class="line">Thread-4 : 8</span><br><span class="line">Thread-3 : 16</span><br><span class="line">main : 12</span><br><span class="line">Thread-3 : 18</span><br><span class="line">Thread-4 : 10</span><br><span class="line">Thread-3 : 20</span><br><span class="line">main : 14</span><br><span class="line">Thread-4 : 12</span><br><span class="line">Thread-3 : 22</span><br><span class="line">main : 16</span><br><span class="line">Thread-3 : 24</span><br><span class="line">Thread-4 : 14</span><br><span class="line">Thread-3 : 26</span><br><span class="line">Thread-3 : 28</span><br><span class="line">Thread-4 : 16</span><br><span class="line">Thread-3 : 30</span><br><span class="line">main : 18</span><br><span class="line">Thread-4 : 18</span><br><span class="line">Thread-3 : 32</span><br><span class="line">main : 20</span><br><span class="line">Thread-3 : 34</span><br><span class="line">main : 22</span><br><span class="line">Thread-4 : 20</span><br><span class="line">Thread-3 : 36</span><br><span class="line">main : 24</span><br><span class="line">Thread-4 : 22</span><br><span class="line">Thread-3 : 38</span><br><span class="line">main : 26</span><br><span class="line">Thread-4 : 24</span><br><span class="line">Thread-3 : 40</span><br><span class="line">main : 28</span><br><span class="line">Thread-4 : 26</span><br><span class="line">main : 30</span><br><span class="line">Thread-4 : 28</span><br><span class="line">main : 32</span><br><span class="line">Thread-3 : 42</span><br><span class="line">Thread-4 : 30</span><br><span class="line">main : 34</span><br><span class="line">Thread-3 : 44</span><br><span class="line">main : 36</span><br><span class="line">Thread-4 : 32</span><br><span class="line">Thread-3 : 46</span><br><span class="line">Thread-4 : 34</span><br><span class="line">main : 38</span><br><span class="line">Thread-3 : 48</span><br><span class="line">main : 40</span><br><span class="line">Thread-4 : 36</span><br><span class="line">Thread-3 : 50</span><br><span class="line">main : 42</span><br><span class="line">Thread-4 : 38</span><br><span class="line">Thread-3 : 52</span><br><span class="line">main : 44</span><br><span class="line">Thread-4 : 40</span><br><span class="line">main : 46</span><br><span class="line">Thread-4 : 42</span><br><span class="line">Thread-3 : 54</span><br><span class="line">Thread-4 : 44</span><br><span class="line">main : 48</span><br><span class="line">Thread-4 : 46</span><br><span class="line">main : 50</span><br><span class="line">Thread-4 : 48</span><br><span class="line">main : 52</span><br><span class="line">Thread-3 : 56</span><br><span class="line">Thread-4 : 50</span><br><span class="line">main : 54</span><br><span class="line">Thread-3 : 58</span><br><span class="line">main : 56</span><br><span class="line">Thread-4 : 52</span><br><span class="line">main : 58</span><br><span class="line">Thread-4 : 54</span><br><span class="line">main : 60</span><br><span class="line">Thread-3 : 60</span><br><span class="line">main : 62</span><br><span class="line">Thread-4 : 56</span><br><span class="line">Thread-3 : 62</span><br><span class="line">main : 64</span><br><span class="line">Thread-3 : 64</span><br><span class="line">main : 66</span><br><span class="line">Thread-4 : 58</span><br><span class="line">main : 68</span><br><span class="line">Thread-3 : 66</span><br><span class="line">Thread-4 : 60</span><br><span class="line">Thread-3 : 68</span><br><span class="line">main : 70</span><br><span class="line">Thread-4 : 62</span><br><span class="line">main : 72</span><br><span class="line">Thread-3 : 70</span><br><span class="line">main : 74</span><br><span class="line">Thread-4 : 64</span><br><span class="line">Thread-3 : 72</span><br><span class="line">main : 76</span><br><span class="line">Thread-3 : 74</span><br><span class="line">Thread-4 : 66</span><br><span class="line">main : 78</span><br><span class="line">Thread-3 : 76</span><br><span class="line">Thread-4 : 68</span><br><span class="line">Thread-3 : 78</span><br><span class="line">main : 80</span><br><span class="line">Thread-4 : 70</span><br><span class="line">main : 82</span><br><span class="line">Thread-3 : 80</span><br><span class="line">main : 84</span><br><span class="line">Thread-4 : 72</span><br><span class="line">main : 86</span><br><span class="line">Thread-3 : 82</span><br><span class="line">main : 88</span><br><span class="line">Thread-3 : 84</span><br><span class="line">main : 90</span><br><span class="line">Thread-4 : 74</span><br><span class="line">main : 92</span><br><span class="line">Thread-4 : 76</span><br><span class="line">main : 94</span><br><span class="line">Thread-4 : 78</span><br><span class="line">Thread-3 : 86</span><br><span class="line">main : 96</span><br><span class="line">Thread-3 : 88</span><br><span class="line">Thread-4 : 80</span><br><span class="line">Thread-3 : 90</span><br><span class="line">Thread-4 : 82</span><br><span class="line">Thread-3 : 92</span><br><span class="line">Thread-4 : 84</span><br><span class="line">Thread-3 : 94</span><br><span class="line">Thread-4 : 86</span><br><span class="line">main : 98</span><br><span class="line">Thread-3 : 96</span><br><span class="line">Thread-4 : 88</span><br><span class="line">Thread-3 : 98</span><br><span class="line">main : 100</span><br><span class="line">Thread-3 : 100</span><br><span class="line">Thread-4 : 90</span><br><span class="line">Thread-4 : 92</span><br><span class="line">Thread-4 : 94</span><br><span class="line">Thread-4 : 96</span><br><span class="line">Thread-4 : 98</span><br><span class="line">Thread-4 : 100</span><br></pre></td></tr></table></figure>
<p>可见主线程和两个线程交替执行，多线程创建成功。</p>
<p><strong>其余一些注意事项查看注释，以后不再赘述。</strong></p>
<p>&nbsp;</p>
<h5 id="方式二：实现Runnable接口"><a href="#方式二：实现Runnable接口" class="headerlink" title="方式二：实现Runnable接口"></a>方式二：实现Runnable接口</h5><ol>
<li>创建一个实现Runnable接口的类</li>
<li>实现类去实现Runnable的抽象方法：run()</li>
<li>创建实现类的对象</li>
<li>将此对象作为参数传递到Thread类的构造器中，创建Thread类对象</li>
<li>通过Thread类对象调用start()</li>
</ol>
<p>&nbsp;</p>
<p>演示代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> ThreadTest;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ThreadCreate2</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//3.创建实现类的对象</span></span><br><span class="line">        MyThread5 m=<span class="keyword">new</span> MyThread5();</span><br><span class="line">        <span class="comment">//4.将此对象作为参数传递到Thread类的构造器中，创建Thread类对象</span></span><br><span class="line">        Thread thread = <span class="keyword">new</span> Thread(m);</span><br><span class="line">        <span class="comment">//5.通过Thread类对象调用start()</span></span><br><span class="line">        <span class="comment">//作用</span></span><br><span class="line">        <span class="comment">//1.启动线程</span></span><br><span class="line">        <span class="comment">//2.调用当前线程的run()--&gt;调用了Runnable类型的target的run()</span></span><br><span class="line">        thread.start();</span><br><span class="line">        </span><br><span class="line">        Thread thread2 = <span class="keyword">new</span> Thread(m);</span><br><span class="line">        <span class="comment">//被允许，因为新建了一个线程，只是共用了一份资源</span></span><br><span class="line">        thread2.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//1.创建一个实现Runnable接口的类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyThread5</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//2.实现类去实现Runnable的抽象方法：run()</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= <span class="number">100</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span>(i % <span class="number">2</span> == <span class="number">0</span> ) System.out.println(i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>&nbsp;</p>
<h5 id="两种线程创建方式的比较的结论"><a href="#两种线程创建方式的比较的结论" class="headerlink" title="两种线程创建方式的比较的结论"></a>两种线程创建方式的比较的结论</h5><p>开发中：优先选择实现Runnable接口的方式</p>
<p>原因：</p>
<ol>
<li>实现方式没有类的单继承的局限性</li>
<li>实现的方式更适合处理多个线程有共享数据的情况</li>
</ol>
<p>&nbsp;</p>
<p>联系：</p>
<ol>
<li><p>Thread类本身也实现了Runnable接口</p>
</li>
<li><p>两种方式都需要重写run()，将线程要执行的逻辑声明再run()中。</p>
</li>
</ol>
<p>&nbsp;</p>
<h4 id="Thread类的常用方法"><a href="#Thread类的常用方法" class="headerlink" title="Thread类的常用方法"></a>Thread类的常用方法</h4><ol>
<li><p>void start()：启动当前线程 JVM调用当前线程的run()方法</p>
</li>
<li><p>void run()：通常需要重写Thread类中的此方法，将创建的线程需要执行的操作声明在此方法中</p>
</li>
<li><p>static Thread currentThread()：静态方法 返回当前代码执行的线程对象</p>
</li>
<li><p>String getName()：获取当前线程名字</p>
</li>
<li><p>void setName()：设置当前线程名字</p>
</li>
<li><p>static void yield()：释放当前cpu的执行权</p>
</li>
<li><p>void join()：在线程a中调用线程b.join()，此时线程a进入阻塞状态，直到线程b完全执行完毕</p>
</li>
<li><p>static void stop()：已过时。当执行此方法时，强制结束当前线程</p>
</li>
<li><p>void sleep(long ms)：让当前线程阻塞ms毫秒</p>
</li>
<li><p>boolean isAlive()：判断当前线程是否存活</p>
</li>
</ol>
<p>&nbsp;</p>
<p>测试代码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> ThreadTest;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ThreadMethodTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        MyThread3 m1=<span class="keyword">new</span> MyThread3(<span class="string">"我的Thread01"</span>);</span><br><span class="line">        <span class="comment">//m1.setName("线程一");</span></span><br><span class="line">        m1.start();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//给主线程命名</span></span><br><span class="line">        Thread.currentThread().setName(<span class="string">"主线程"</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= <span class="number">100</span>; i++) &#123;</span><br><span class="line">            System.out.println(Thread.currentThread().getName()+<span class="string">" : "</span>+i);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span>(i == <span class="number">20</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    m1.join();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println(m1.isAlive());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyThread3</span> <span class="keyword">extends</span> <span class="title">Thread</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MyThread3</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(name);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= <span class="number">100</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                sleep(<span class="number">100</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(Thread.currentThread().getName()+<span class="string">" : "</span>+i);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span>(i % <span class="number">20</span> == <span class="number">0</span>) yield();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>我的输出如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br></pre></td><td class="code"><pre><span class="line">主线程 : 0</span><br><span class="line">主线程 : 1</span><br><span class="line">主线程 : 2</span><br><span class="line">主线程 : 3</span><br><span class="line">主线程 : 4</span><br><span class="line">主线程 : 5</span><br><span class="line">主线程 : 6</span><br><span class="line">主线程 : 7</span><br><span class="line">主线程 : 8</span><br><span class="line">主线程 : 9</span><br><span class="line">主线程 : 10</span><br><span class="line">主线程 : 11</span><br><span class="line">主线程 : 12</span><br><span class="line">主线程 : 13</span><br><span class="line">主线程 : 14</span><br><span class="line">主线程 : 15</span><br><span class="line">主线程 : 16</span><br><span class="line">主线程 : 17</span><br><span class="line">主线程 : 18</span><br><span class="line">主线程 : 19</span><br><span class="line">主线程 : 20</span><br><span class="line">我的Thread01 : 0</span><br><span class="line">我的Thread01 : 1</span><br><span class="line">我的Thread01 : 2</span><br><span class="line">我的Thread01 : 3</span><br><span class="line">我的Thread01 : 4</span><br><span class="line">我的Thread01 : 5</span><br><span class="line">我的Thread01 : 6</span><br><span class="line">我的Thread01 : 7</span><br><span class="line">我的Thread01 : 8</span><br><span class="line">我的Thread01 : 9</span><br><span class="line">我的Thread01 : 10</span><br><span class="line">我的Thread01 : 11</span><br><span class="line">我的Thread01 : 12</span><br><span class="line">我的Thread01 : 13</span><br><span class="line">我的Thread01 : 14</span><br><span class="line">我的Thread01 : 15</span><br><span class="line">我的Thread01 : 16</span><br><span class="line">我的Thread01 : 17</span><br><span class="line">我的Thread01 : 18</span><br><span class="line">我的Thread01 : 19</span><br><span class="line">我的Thread01 : 20</span><br><span class="line">我的Thread01 : 21</span><br><span class="line">我的Thread01 : 22</span><br><span class="line">我的Thread01 : 23</span><br><span class="line">我的Thread01 : 24</span><br><span class="line">我的Thread01 : 25</span><br><span class="line">我的Thread01 : 26</span><br><span class="line">我的Thread01 : 27</span><br><span class="line">我的Thread01 : 28</span><br><span class="line">我的Thread01 : 29</span><br><span class="line">我的Thread01 : 30</span><br><span class="line">我的Thread01 : 31</span><br><span class="line">我的Thread01 : 32</span><br><span class="line">我的Thread01 : 33</span><br><span class="line">我的Thread01 : 34</span><br><span class="line">我的Thread01 : 35</span><br><span class="line">我的Thread01 : 36</span><br><span class="line">我的Thread01 : 37</span><br><span class="line">我的Thread01 : 38</span><br><span class="line">我的Thread01 : 39</span><br><span class="line">我的Thread01 : 40</span><br><span class="line">我的Thread01 : 41</span><br><span class="line">我的Thread01 : 42</span><br><span class="line">我的Thread01 : 43</span><br><span class="line">我的Thread01 : 44</span><br><span class="line">我的Thread01 : 45</span><br><span class="line">我的Thread01 : 46</span><br><span class="line">我的Thread01 : 47</span><br><span class="line">我的Thread01 : 48</span><br><span class="line">我的Thread01 : 49</span><br><span class="line">我的Thread01 : 50</span><br><span class="line">我的Thread01 : 51</span><br><span class="line">我的Thread01 : 52</span><br><span class="line">我的Thread01 : 53</span><br><span class="line">我的Thread01 : 54</span><br><span class="line">我的Thread01 : 55</span><br><span class="line">我的Thread01 : 56</span><br><span class="line">我的Thread01 : 57</span><br><span class="line">我的Thread01 : 58</span><br><span class="line">我的Thread01 : 59</span><br><span class="line">我的Thread01 : 60</span><br><span class="line">我的Thread01 : 61</span><br><span class="line">我的Thread01 : 62</span><br><span class="line">我的Thread01 : 63</span><br><span class="line">我的Thread01 : 64</span><br><span class="line">我的Thread01 : 65</span><br><span class="line">我的Thread01 : 66</span><br><span class="line">我的Thread01 : 67</span><br><span class="line">我的Thread01 : 68</span><br><span class="line">我的Thread01 : 69</span><br><span class="line">我的Thread01 : 70</span><br><span class="line">我的Thread01 : 71</span><br><span class="line">我的Thread01 : 72</span><br><span class="line">我的Thread01 : 73</span><br><span class="line">我的Thread01 : 74</span><br><span class="line">我的Thread01 : 75</span><br><span class="line">我的Thread01 : 76</span><br><span class="line">我的Thread01 : 77</span><br><span class="line">我的Thread01 : 78</span><br><span class="line">我的Thread01 : 79</span><br><span class="line">我的Thread01 : 80</span><br><span class="line">我的Thread01 : 81</span><br><span class="line">我的Thread01 : 82</span><br><span class="line">我的Thread01 : 83</span><br><span class="line">我的Thread01 : 84</span><br><span class="line">我的Thread01 : 85</span><br><span class="line">我的Thread01 : 86</span><br><span class="line">我的Thread01 : 87</span><br><span class="line">我的Thread01 : 88</span><br><span class="line">我的Thread01 : 89</span><br><span class="line">我的Thread01 : 90</span><br><span class="line">我的Thread01 : 91</span><br><span class="line">我的Thread01 : 92</span><br><span class="line">我的Thread01 : 93</span><br><span class="line">我的Thread01 : 94</span><br><span class="line">我的Thread01 : 95</span><br><span class="line">我的Thread01 : 96</span><br><span class="line">我的Thread01 : 97</span><br><span class="line">我的Thread01 : 98</span><br><span class="line">我的Thread01 : 99</span><br><span class="line">我的Thread01 : 100</span><br><span class="line">主线程 : 21</span><br><span class="line">主线程 : 22</span><br><span class="line">主线程 : 23</span><br><span class="line">主线程 : 24</span><br><span class="line">主线程 : 25</span><br><span class="line">主线程 : 26</span><br><span class="line">主线程 : 27</span><br><span class="line">主线程 : 28</span><br><span class="line">主线程 : 29</span><br><span class="line">主线程 : 30</span><br><span class="line">主线程 : 31</span><br><span class="line">主线程 : 32</span><br><span class="line">主线程 : 33</span><br><span class="line">主线程 : 34</span><br><span class="line">主线程 : 35</span><br><span class="line">主线程 : 36</span><br><span class="line">主线程 : 37</span><br><span class="line">主线程 : 38</span><br><span class="line">主线程 : 39</span><br><span class="line">主线程 : 40</span><br><span class="line">主线程 : 41</span><br><span class="line">主线程 : 42</span><br><span class="line">主线程 : 43</span><br><span class="line">主线程 : 44</span><br><span class="line">主线程 : 45</span><br><span class="line">主线程 : 46</span><br><span class="line">主线程 : 47</span><br><span class="line">主线程 : 48</span><br><span class="line">主线程 : 49</span><br><span class="line">主线程 : 50</span><br><span class="line">主线程 : 51</span><br><span class="line">主线程 : 52</span><br><span class="line">主线程 : 53</span><br><span class="line">主线程 : 54</span><br><span class="line">主线程 : 55</span><br><span class="line">主线程 : 56</span><br><span class="line">主线程 : 57</span><br><span class="line">主线程 : 58</span><br><span class="line">主线程 : 59</span><br><span class="line">主线程 : 60</span><br><span class="line">主线程 : 61</span><br><span class="line">主线程 : 62</span><br><span class="line">主线程 : 63</span><br><span class="line">主线程 : 64</span><br><span class="line">主线程 : 65</span><br><span class="line">主线程 : 66</span><br><span class="line">主线程 : 67</span><br><span class="line">主线程 : 68</span><br><span class="line">主线程 : 69</span><br><span class="line">主线程 : 70</span><br><span class="line">主线程 : 71</span><br><span class="line">主线程 : 72</span><br><span class="line">主线程 : 73</span><br><span class="line">主线程 : 74</span><br><span class="line">主线程 : 75</span><br><span class="line">主线程 : 76</span><br><span class="line">主线程 : 77</span><br><span class="line">主线程 : 78</span><br><span class="line">主线程 : 79</span><br><span class="line">主线程 : 80</span><br><span class="line">主线程 : 81</span><br><span class="line">主线程 : 82</span><br><span class="line">主线程 : 83</span><br><span class="line">主线程 : 84</span><br><span class="line">主线程 : 85</span><br><span class="line">主线程 : 86</span><br><span class="line">主线程 : 87</span><br><span class="line">主线程 : 88</span><br><span class="line">主线程 : 89</span><br><span class="line">主线程 : 90</span><br><span class="line">主线程 : 91</span><br><span class="line">主线程 : 92</span><br><span class="line">主线程 : 93</span><br><span class="line">主线程 : 94</span><br><span class="line">主线程 : 95</span><br><span class="line">主线程 : 96</span><br><span class="line">主线程 : 97</span><br><span class="line">主线程 : 98</span><br><span class="line">主线程 : 99</span><br><span class="line">主线程 : 100</span><br><span class="line">false</span><br></pre></td></tr></table></figure>
<p>&nbsp;</p>
<h4 id="线程的调度"><a href="#线程的调度" class="headerlink" title="线程的调度"></a>线程的调度</h4><h5 id="调度策略"><a href="#调度策略" class="headerlink" title="调度策略"></a>调度策略</h5><p><strong>1.时间片</strong></p>
<p><img src="/2020/08/04/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E5%A4%9A%E7%BA%BF%E7%A8%8B/时间片.png" alt="时间片"></p>
<p><strong>2.抢占式：高优先级的线程抢占CPU</strong></p>
<h5 id="Java的调度方法"><a href="#Java的调度方法" class="headerlink" title="Java的调度方法"></a>Java的调度方法</h5><p>同优先级线程组成先进先出队列（先到先服务），使用时间片策略</p>
<p>对高优先级，使用优先调度的抢占式策略</p>
<h5 id="线程的优先级等级"><a href="#线程的优先级等级" class="headerlink" title="线程的优先级等级"></a>线程的优先级等级</h5><p>MAX_PRIORITY=10</p>
<p>MIN_PRIORITY=1</p>
<p>NORM_PRIORITY=5（默认）</p>
<h5 id="涉及的方法"><a href="#涉及的方法" class="headerlink" title="涉及的方法"></a>涉及的方法</h5><p>int getPriority()：返回线程优先级</p>
<p>void setPriority(int newPriority)：改变线程的优先级</p>
<h5 id="小提示"><a href="#小提示" class="headerlink" title="小提示"></a>小提示</h5><p>线程创建时继承父线程的优先级。</p>
<p>低优先级只是获得调度的概率低，并非一定是在高优先级线程之后才被调用。</p>
<p>&nbsp;</p>
<h4 id="补充：线程的分类"><a href="#补充：线程的分类" class="headerlink" title="补充：线程的分类"></a>补充：线程的分类</h4><p>Java的线程中分为两类：一种是<strong>用户线程</strong>，一种是<strong>守护线程</strong>。</p>
<ul>
<li>它们在几乎每个方面都是相同的，唯一的区别是判断JVM何时离开。</li>
<li>守护线程是用来服务用户线程的，通过在start()方法调用前调用<strong>(thread).setDaemon(true)</strong>可以把一个用户线程变成一个守护线程。</li>
<li>Java垃圾回收就是一个典型的守护线程。</li>
<li>若JVM中都是守护线程，当前JVM将退出。</li>
</ul>
<p><em>（演示代码待补充）</em></p>
<p><a href="https://blog.csdn.net/qq_41063141/article/details/91939540" target="_blank" rel="noopener">https://blog.csdn.net/qq_41063141/article/details/91939540</a></p>
<h3 id="线程的生命周期"><a href="#线程的生命周期" class="headerlink" title="线程的生命周期"></a>线程的生命周期</h3><p>JDK中用了Thread.State类定义了线程的六种状态：</p>
<ul>
<li><strong>NEW</strong>：A Thread which has not yet started.</li>
<li><strong>RUNNABLE</strong>：A Thread which is running or suspended.</li>
<li><strong>BLOCKED</strong>：A Thread which is blocked on a monitor.</li>
<li><strong>WAITING</strong>：A Thread which is waiting with no timeout.</li>
<li><strong>TIMED_WAITING</strong>：A Thread which is waiting with a timeout.</li>
<li><strong>TERMINATED</strong>：A thread which is no longer alive.</li>
</ul>
<p>这种分类是按照方法分的，不是很清晰，可以按照线程的状态分成5种状态：</p>
<ul>
<li><strong>新建</strong>：当一个Thread类或其子类的对象被声明并创建时，新生的线程对象处于新建状态。</li>
<li><strong>就绪</strong>：处于<strong>新建</strong>状态的线程被start()后，将进入线程队列等待CPU时间片，此时它已具备了运行的条件 ，只是没分配到CPU资源。</li>
<li><strong>运行</strong>：当就绪的线程被调度并获得CPU资源时便进入运行状态，run()方法定义了线程的操作和功能。</li>
<li><strong>阻塞</strong>：在某种特殊情况下，被人为挂起或执行输入输出操作时，让出CPU并临时中止自己的执行，进入阻塞状态。</li>
<li><strong>死亡</strong>：线程完成了它的全部工作或线程被提前强制性地中止或出现异常导致结束。</li>
</ul>
<p><img src="/2020/08/04/Java%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E5%A4%9A%E7%BA%BF%E7%A8%8B/线程的生命周期.png" alt="线程的生命周期"></p>
<p>&nbsp;</p>
<h3 id="线程的同步"><a href="#线程的同步" class="headerlink" title="线程的同步"></a>线程的同步</h3><h4 id="线程的安全问题"><a href="#线程的安全问题" class="headerlink" title="线程的安全问题"></a>线程的安全问题</h4><p>多个线程执行的不确定性会引起执行结果的不确定性。</p>
<p>多个线程对数据的共享，会造成操作的不完整性，会破坏数据。</p>
<h5 id="原因"><a href="#原因" class="headerlink" title="原因"></a>原因</h5><p>当多条语句在操作同一个线程共享数据时，一个线程对多条语句执行了一部分，还没有执行完，另一个线程参与进来执行，导致共享数据的错误。</p>
<h5 id="解决方法"><a href="#解决方法" class="headerlink" title="解决方法"></a>解决方法</h5><p>对多条操作共享数据的语句，只能让一个线程都执行完，在执行的过程中，其他线程不能参与执行。</p>
<p>&nbsp;</p>
<h4 id="使用Synchronized关键字实现线程的同步"><a href="#使用Synchronized关键字实现线程的同步" class="headerlink" title="使用Synchronized关键字实现线程的同步"></a>使用Synchronized关键字实现线程的同步</h4><h5 id="同步代码块"><a href="#同步代码块" class="headerlink" title="同步代码块"></a>同步代码块</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">synchronized</span>(同步监视器)&#123;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//需要同步的代码</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>说明：</p>
<ol>
<li>操作共享数据的代码就是需要被同步的代码。</li>
<li>共享数据是多个线程共同操控的变量。</li>
<li>同步监视器俗称“锁”。任何一个类的都可以充当“锁”。</li>
<li>多个线程必须共用<strong>同一把锁</strong>，即同步监视器必须是<strong>同一个对象</strong>。</li>
<li>实现Runnable接口创建的线程可以考虑使用<strong>this</strong>充当同步监视器，继承Thread类创建的线程慎用<strong>this</strong>。</li>
<li>继承Thread类创建的线程可以考虑使用<strong>(类名).class</strong>充当同步监视器。</li>
</ol>
<p>&nbsp;</p>
<h5 id="同步方法"><a href="#同步方法" class="headerlink" title="同步方法"></a>同步方法</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//格式：</span></span><br><span class="line"><span class="comment">//访问修饰符 synchronized 返回值类型 方法名()&#123;&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//例子</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">musterMethod</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="comment">//方法体</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>说明：</p>
<ol>
<li>同步方法仍然涉及到同步监视器，只不过不需要显式声明。</li>
<li><strong>非静态</strong>的同步方法的同步监视器为<strong>this</strong>，静态的同步方法的同步监视器是<strong>(类名).class</strong>。</li>
</ol>
<p>&nbsp;</p>
<h4 id="同步的优点与局限"><a href="#同步的优点与局限" class="headerlink" title="同步的优点与局限"></a>同步的优点与局限</h4><p>优点：解决了线程的安全问题</p>
<p>局限：操作同步时只能由一个线程参与，其他线程等待，相当于一个单线程的过程，效率较低。</p>
<p>&nbsp;</p>
<h4 id="死锁问题"><a href="#死锁问题" class="headerlink" title="死锁问题"></a>死锁问题</h4><p>不同的线程分别占用对方需要的同步资源不放弃，都在等待对方放弃自己需要的同步资源，就形成了线程的死锁。</p>
<p>出现死锁后，不会出现异常，不会出现提示，只是所有的线程都处于阻塞状态，无法继续。</p>
<p>&nbsp;</p>
<h5 id="解决方法-1"><a href="#解决方法-1" class="headerlink" title="解决方法"></a>解决方法</h5><ul>
<li>专门的算法、原则</li>
<li>尽量减少同步资源的定义</li>
<li>尽量避免嵌套同步</li>
</ul>
<p>&nbsp;</p>
<h5 id="死锁样例"><a href="#死锁样例" class="headerlink" title="死锁样例"></a>死锁样例</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> ThreadTest;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">foo</span><span class="params">(B b)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"当前线程名: "</span> + Thread.currentThread().getName()</span><br><span class="line">                + <span class="string">" 进入了A实例的foo方法"</span>); <span class="comment">// ①</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Thread.sleep(<span class="number">200</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException ex) &#123;</span><br><span class="line">            ex.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">"当前线程名: "</span> + Thread.currentThread().getName()</span><br><span class="line">                + <span class="string">" 企图调用B实例的last方法"</span>); <span class="comment">// ③</span></span><br><span class="line">        b.last();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">last</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"进入了A类的last方法内部"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">bar</span><span class="params">(A a)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"当前线程名: "</span> + Thread.currentThread().getName()</span><br><span class="line">                + <span class="string">" 进入了B实例的bar方法"</span>); <span class="comment">// ②</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Thread.sleep(<span class="number">200</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException ex) &#123;</span><br><span class="line">            ex.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">"当前线程名: "</span> + Thread.currentThread().getName()</span><br><span class="line">                + <span class="string">" 企图调用A实例的last方法"</span>); <span class="comment">// ④</span></span><br><span class="line">        a.last();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">last</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"进入了B类的last方法内部"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DeadLock</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line">    A a = <span class="keyword">new</span> A();</span><br><span class="line">    B b = <span class="keyword">new</span> B();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Thread.currentThread().setName(<span class="string">"主线程"</span>);</span><br><span class="line">        <span class="comment">// 调用a对象的foo方法</span></span><br><span class="line">        a.foo(b);</span><br><span class="line">        System.out.println(<span class="string">"进入了主线程之后"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Thread.currentThread().setName(<span class="string">"副线程"</span>);</span><br><span class="line">        <span class="comment">// 调用b对象的bar方法</span></span><br><span class="line">        b.bar(a);</span><br><span class="line">        System.out.println(<span class="string">"进入了副线程之后"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        DeadLock dl = <span class="keyword">new</span> DeadLock();</span><br><span class="line">        <span class="keyword">new</span> Thread(dl).start();</span><br><span class="line">        dl.init();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>&nbsp;</p>
<p>我的输出</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">当前线程名: 主线程 进入了A实例的foo方法</span><br><span class="line">当前线程名: 副线程 进入了B实例的bar方法</span><br><span class="line">当前线程名: 主线程 企图调用B实例的last方法</span><br><span class="line">当前线程名: 副线程 企图调用A实例的last方法</span><br></pre></td></tr></table></figure>
<p>然后程序就没了动静，也没结束，这就是死锁。</p>
<p>主线程想要B实例这把锁，副线程想要A实例这把锁，争执不下，都进入阻塞状态。</p>
<p>&nbsp;</p>
<h4 id="使用Lock的实现类实现线程的同步"><a href="#使用Lock的实现类实现线程的同步" class="headerlink" title="使用Lock的实现类实现线程的同步"></a>使用Lock的实现类实现线程的同步</h4><p>从JDK 5.0开始Java提供了更强大的线程同步机制：通过显式定义同步锁对象来实现同步。同步锁使用Lock对象充当。</p>
<p><strong>java.util.concurrent.locks.Lock接口是控制多个线程对共享资源进行访问的工具。</strong>锁提供了对共享资源的独占访问，每次只能有一个线程对Lock对象加锁，线程开始访问共享资源之前应先获得Lock对象。</p>
<p>ReentrantLock类实现了Lock，它拥有与synchronized相同的并发性和内存语义，在实现线程安全的控制中，比较常用的是ReentrantLock，可以显式加锁、释放锁。</p>
<p>&nbsp;</p>
<p>演示代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> Lock;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.locks.ReentrantLock;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">myThread</span> <span class="keyword">implements</span> <span class="title">Runnable</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//共享资源</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> resource=<span class="number">10</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//1.生成一把“锁”</span></span><br><span class="line">    ReentrantLock lock=<span class="keyword">new</span> ReentrantLock(<span class="keyword">false</span>);</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            <span class="keyword">while</span>(<span class="keyword">true</span>)&#123;</span><br><span class="line">                <span class="comment">//2.操作共享数据之前先上锁</span></span><br><span class="line">                lock.lock();</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span>(resource&gt;<span class="number">0</span>)&#123;</span><br><span class="line">                    System.out.println(Thread.currentThread().getName()+<span class="string">" 抢到第"</span>+(<span class="number">11</span>-resource)+<span class="string">"份资源"</span>);</span><br><span class="line">                    resource--;</span><br><span class="line">                &#125;<span class="keyword">else</span> <span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">                <span class="comment">//3.操作完成，解锁</span></span><br><span class="line">                lock.unlock();</span><br><span class="line"></span><br><span class="line">                <span class="keyword">try</span> &#123;  <span class="comment">//休眠，增加交互概率</span></span><br><span class="line">                    Thread.sleep(<span class="number">10</span>);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">finally</span>&#123; <span class="comment">//4.万一循环被break或者try内语句出现异常，最后给线程解锁</span></span><br><span class="line">            lock.unlock();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LockTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        myThread m=<span class="keyword">new</span> myThread();</span><br><span class="line">        Thread t1=<span class="keyword">new</span> Thread(m);</span><br><span class="line">        Thread t2=<span class="keyword">new</span> Thread(m);</span><br><span class="line">        Thread t3=<span class="keyword">new</span> Thread(m);</span><br><span class="line"></span><br><span class="line">        t1.setName(<span class="string">"线程1"</span>);</span><br><span class="line">        t2.setName(<span class="string">"线程2"</span>);</span><br><span class="line">        t3.setName(<span class="string">"线程3"</span>);</span><br><span class="line"></span><br><span class="line">        t1.start();</span><br><span class="line">        t2.start();</span><br><span class="line">        t3.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>说明：和synchronized一样，多个线程处理共享资源的时候应当<strong>共用同一个Lock对象</strong>。</p>
<p>&nbsp;</p>
<h5 id="Lock和synchronized的比较"><a href="#Lock和synchronized的比较" class="headerlink" title="Lock和synchronized的比较"></a>Lock和synchronized的比较</h5><ol>
<li>Lock是显式锁（手动开启和关闭锁，别忘记关闭锁），synchronized是隐式锁，出了作用域自动释放。</li>
<li>Lock只有代码块锁，synchronized有代码块锁和方法锁。</li>
<li>使用Lock锁，JVM将花费较少的时间来调度线程，性能更好。并且具有更好的扩展性（提供更多的子类）。</li>
</ol>
<p><strong>优先使用顺序</strong>：<br>Lock—&gt;同步代码块（已经进入了方法体，分配了相应资源）—&gt;同步方法（在方法体之外）</p>
<p>&nbsp;</p>
<h3 id="线程的通信"><a href="#线程的通信" class="headerlink" title="线程的通信"></a>线程的通信</h3><h4 id="synchronized的通信方式"><a href="#synchronized的通信方式" class="headerlink" title="synchronized的通信方式"></a>synchronized的通信方式</h4><p><strong>wait()</strong>：令当前线程挂起并放弃CPU、同步资源并等待，使别的线程可访问并修改共享资源，而当前线程排队等候其他线程调用notify()或notifyAll()方法唤醒，唤醒后等待重新获得对监视器的所有权后才能继续执行。</p>
<p>说明：</p>
<ol>
<li>在当前线程中调用方法：对象名.wait()。</li>
<li>使当前线程进入等待（某对象）状态，直到另一线程对该对象发出notify()或notifyAll()为止。</li>
<li>调用方法的必要条件：当前线程必须具有对该对象的监控权（加锁）。</li>
<li>调用此方法后，当前线程将<strong>释放对象监控权</strong>，然后进入等待。</li>
<li>在当前线程被notify()后，要重新获得监控权，然后从断点处继续代码的执行。</li>
</ol>
<p>&nbsp;</p>
<p><strong>notify()</strong>：唤醒正在排队等待同步资源的线程中优先级最高者，让其结束等待。</p>
<p><strong>notifyAll()</strong>：唤醒正在排队等待资源的所有线程，让它们结束等待。</p>
<p>说明：</p>
<ol>
<li>在当前线程中调用方法：对象名.notify()/notifyAll()。</li>
<li>功能：唤醒等待该对象监控权的一个/所有线程。</li>
<li>调用方法的必要条件：当前线程必须具有对该对象的监控权（加锁）。</li>
</ol>
<p>&nbsp;</p>
<h5 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h5><p>这三个方法只有在synchronized方法或synchronized代码块中才能使用，否则会报java.lang.IllegalMonitorStateException异常。</p>
<p>因为这三个方法必须有锁对象调用，而任意对象都可以作为synchronized的同步锁，因此这三个方法只能在Object类中声明。</p>
<p>&nbsp;</p>
<h5 id="演示代码"><a href="#演示代码" class="headerlink" title="演示代码"></a>演示代码</h5><p>让两个线程交替输出1-10的数</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//实现Runnable接口创建线程</span></span><br><span class="line"><span class="keyword">package</span> CommunicateTest;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test1</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        myThread m = <span class="keyword">new</span> myThread();</span><br><span class="line">        Thread myThread1 = <span class="keyword">new</span> Thread(m);</span><br><span class="line">        Thread myThread2 = <span class="keyword">new</span> Thread(m);</span><br><span class="line"></span><br><span class="line">        myThread1.setName(<span class="string">"我的线程1"</span>);</span><br><span class="line">        myThread2.setName(<span class="string">"我的线程2"</span>);</span><br><span class="line"></span><br><span class="line">        myThread1.start();</span><br><span class="line">        myThread2.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">myThread</span> <span class="keyword">implements</span> <span class="title">Runnable</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> num=<span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">            <span class="keyword">synchronized</span> (<span class="keyword">this</span>) &#123;</span><br><span class="line">                notify();</span><br><span class="line">                <span class="keyword">if</span> (num &lt;= <span class="number">10</span>) &#123;</span><br><span class="line">                    System.out.println(Thread.currentThread().getName() + <span class="string">"：输出"</span> + num);</span><br><span class="line">                    num++;</span><br><span class="line"></span><br><span class="line">                    <span class="keyword">try</span> &#123;</span><br><span class="line">                        wait();</span><br><span class="line">                    &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                        e.printStackTrace();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//继承Thread类方法创建线程</span></span><br><span class="line"><span class="keyword">package</span> CommunicateTest;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test2</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        myThread2 m1 = <span class="keyword">new</span> myThread2();</span><br><span class="line">        myThread2 m2 = <span class="keyword">new</span> myThread2();</span><br><span class="line"></span><br><span class="line">        m1.setName(<span class="string">"我的线程1"</span>);</span><br><span class="line">        m2.setName(<span class="string">"我的线程2"</span>);</span><br><span class="line"></span><br><span class="line">        m1.start();</span><br><span class="line">        m2.start();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">myThread2</span> <span class="keyword">extends</span> <span class="title">Thread</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> num=<span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">            <span class="keyword">synchronized</span> (myThread2<span class="class">.<span class="keyword">class</span>) </span>&#123;</span><br><span class="line">                myThread2<span class="class">.<span class="keyword">class</span>.<span class="title">notify</span>()</span>;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (num &lt;= <span class="number">10</span>) &#123;</span><br><span class="line">                    System.out.println(Thread.currentThread().getName() + <span class="string">"：输出"</span> + num);</span><br><span class="line">                    num++;</span><br><span class="line"></span><br><span class="line">                    <span class="keyword">try</span> &#123;</span><br><span class="line">                        myThread2<span class="class">.<span class="keyword">class</span>.<span class="title">wait</span>()</span>;</span><br><span class="line">                    &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                        e.printStackTrace();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>&nbsp;</p>
<h4 id="经典例题：生产者消费者问题"><a href="#经典例题：生产者消费者问题" class="headerlink" title="经典例题：生产者消费者问题"></a>经典例题：生产者消费者问题</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> ProductorCustomerTest;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Clerk clerk = <span class="keyword">new</span> Clerk();</span><br><span class="line">        Productor p1 = <span class="keyword">new</span> Productor(clerk);</span><br><span class="line">        p1.setName(<span class="string">"生产者1"</span>);</span><br><span class="line"></span><br><span class="line">        Customer c1 = <span class="keyword">new</span> Customer(clerk);</span><br><span class="line">        c1.setName(<span class="string">"消费者1"</span>);</span><br><span class="line"></span><br><span class="line">        p1.start();</span><br><span class="line">        c1.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Clerk</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> productionNum;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Clerk</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.productionNum=<span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">addProduction</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(productionNum&lt;<span class="number">20</span>)&#123;</span><br><span class="line">            productionNum++;</span><br><span class="line">            System.out.println(Thread.currentThread().getName()+<span class="string">"：生产第"</span>+productionNum+<span class="string">"个产品"</span>);</span><br><span class="line"></span><br><span class="line">            notify();</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                wait();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">getProduct</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(productionNum&gt;<span class="number">0</span>)&#123;</span><br><span class="line">            System.out.println(Thread.currentThread().getName()+<span class="string">"：消费第"</span>+productionNum+<span class="string">"个产品"</span>);</span><br><span class="line">            productionNum--;</span><br><span class="line"></span><br><span class="line">            notify();</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                wait();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Productor</span> <span class="keyword">extends</span> <span class="title">Thread</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    Clerk clerk;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Productor</span><span class="params">(Clerk c)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.clerk=c;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(getName()+<span class="string">"开始生产！"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(<span class="number">100</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            clerk.addProduction();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Customer</span> <span class="keyword">extends</span>  <span class="title">Thread</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    Clerk clerk;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Customer</span><span class="params">(Clerk c)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.clerk=c;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(getName()+<span class="string">"开始消费！"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(<span class="number">100</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            clerk.getProduct();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>&nbsp;</p>
<h3 id="JDK-5-0新增的线程创建方式"><a href="#JDK-5-0新增的线程创建方式" class="headerlink" title="JDK 5.0新增的线程创建方式"></a>JDK 5.0新增的线程创建方式</h3><h4 id="实现Callable接口"><a href="#实现Callable接口" class="headerlink" title="实现Callable接口"></a>实现Callable接口</h4><p>与使用Runnable相比，Callable功能更加强大</p>
<ul>
<li>相比run()方法，可以有返回值</li>
<li>方法可以抛出异常</li>
<li>返回值支持泛型</li>
<li>需要借助FutureTask类，比如获取返回结果</li>
</ul>
<p>&nbsp;</p>
<h5 id="Future接口"><a href="#Future接口" class="headerlink" title="Future接口"></a>Future接口</h5><p>可以对具体Runnable、Callable任务的执行结果进行取消、查询是否完成、获取结果等。</p>
<p><strong>FutrueTask是Future接口的唯一实现类</strong>。</p>
<p>FutureTask同时实现了Runnable、Future接口。它既可以作为Runnable被线程执行，又可以作为Future得到Callable的返回值。</p>
<p>&nbsp;</p>
<p>演示代码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> ThreadCallable;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.Callable;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.ExecutionException;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.FutureTask;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> 11346</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//3.创建Callable接口实现类的对象</span></span><br><span class="line">        NumThread numThread = <span class="keyword">new</span> NumThread();</span><br><span class="line">        <span class="comment">//4.将此Callable实现类对象传入FutureTask的构造器中，创建FutureTask的对象</span></span><br><span class="line">        FutureTask&lt;Integer&gt; futureTask = <span class="keyword">new</span> FutureTask&lt;Integer&gt;(numThread);</span><br><span class="line">        <span class="comment">//5.将FutureTask的对象作为参数传入Thread类的构造器中，创建Thread类的对象，并start()</span></span><br><span class="line">        <span class="keyword">new</span> Thread(futureTask).start();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//6.需要的话获取返回值</span></span><br><span class="line">            <span class="comment">//get()返回值即为FutureTask构造器参数Callable实现类重写的call()的返回值</span></span><br><span class="line">            Integer integer = futureTask.get();</span><br><span class="line">            System.out.println(<span class="string">"返回值为："</span> + integer);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ExecutionException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//1.创建一个实现Callable接口的实现类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NumThread</span> <span class="keyword">implements</span> <span class="title">Callable</span>&lt;<span class="title">Integer</span>&gt;</span>&#123;</span><br><span class="line">    <span class="comment">//2.实现call()，将此线程需要执行的方法声明在call()中</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">call</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> sum=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;=<span class="number">100</span>;i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>((i &amp; <span class="number">1</span>) == <span class="number">0</span>)&#123;</span><br><span class="line">                System.out.println(Thread.currentThread().getName()+<span class="string">"："</span>+i);</span><br><span class="line"></span><br><span class="line">                sum+=i;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> sum;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>&nbsp;</p>
<h4 id="线程池"><a href="#线程池" class="headerlink" title="线程池"></a>线程池</h4><p><strong>背景</strong>：经常创建和销毁、使用量特别大的资源，比如并发情况下的线程，对性能影响很大。</p>
<p><strong>思路</strong>：提前创建好多个线程，放入线程池中，使用时直接获取，使用完放回池中。可以避免频繁创建销毁、实现重复利用。类似生活中的公共交通工具。</p>
<p><strong>好处</strong>：</p>
<ul>
<li>提高响应速度（减少了创建新线程的时间）</li>
<li>降低资源消耗（重复利用线程池中线程，不需要每次都创建）</li>
<li>便于线程管理：<ol>
<li>corePoolSize：核心池的大小</li>
<li>maximumPoolSize：最大线程数</li>
<li>keepAliveTime：线程没有任务时最多保持多长时间后会终止</li>
<li>…</li>
</ol>
</li>
</ul>
<p>&nbsp;</p>
<h4 id="线程池相关API"><a href="#线程池相关API" class="headerlink" title="线程池相关API"></a>线程池相关API</h4><p>JDK5.0起提供了线程池相关API：<strong>ExecutorService</strong>和<strong>Executors</strong></p>
<p>&nbsp;</p>
<p>ExecutorService：真正的线程池接口。常见子类<strong>ThreadPoolExecutor</strong></p>
<ul>
<li><strong>void execute(Runnable command)</strong>：执行任务命令，没有返回值，一般用来执行Runnable。</li>
<li><strong><T>Future<T> submit(Callable<T> task)</T></T></T></strong>：执行任务，有返回值，一般用来执行Callable。</li>
<li><strong>void shutdown()</strong>：关闭连接池。</li>
</ul>
<p>&nbsp;</p>
<p>Executors：工具类、线程池的工厂类，用于创建并返回不同类型的线程池。</p>
<ul>
<li><strong>Executors.newCachedThreadPool()</strong>：创建一个可根据需要创建新线程的线程池。</li>
<li><strong>Executors.newFixedThreadPool(int n)</strong>：创建一个可重用固定线程数的线程池。</li>
<li><strong>Executors.newSingleThreadExecutor()</strong>：创建一个只有一个线程的线程池。</li>
<li><strong>Executors.newScheduledThreadPool(int n)</strong>：创建一个线程池，它可安排在给定延迟后运行命令或者定期地执行。</li>
</ul>
<p>&nbsp;</p>
<p>演示代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> ThreadPool;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//1.提供指定数量的线程池</span></span><br><span class="line">        ExecutorService executorService = Executors.newFixedThreadPool(<span class="number">10</span>);</span><br><span class="line">        <span class="comment">//设置属性得用实现类，接口里面没有设置属性的方法</span></span><br><span class="line">        ThreadPoolExecutor executor = (ThreadPoolExecutor) executorService;</span><br><span class="line">        <span class="comment">//设置属性</span></span><br><span class="line">        executor.setMaximumPoolSize(<span class="number">15</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//2.执行指定的线程的操作。需要提供实现Runnable或者Callable接口的实现类的对象</span></span><br><span class="line">        executor.execute(<span class="keyword">new</span> EvenNumThread()); <span class="comment">//适合使用于Runnable</span></span><br><span class="line">        FutureTask&lt;Integer&gt; futureTask = (FutureTask&lt;Integer&gt;) executor.submit(<span class="keyword">new</span> OddNumThread());<span class="comment">//适合使用于Callable</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Integer integer = futureTask.get();</span><br><span class="line">            System.out.println(<span class="string">"返回值为："</span>+integer);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ExecutionException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//3.关闭连接池</span></span><br><span class="line">        executorService.shutdown();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">EvenNumThread</span> <span class="keyword">implements</span> <span class="title">Runnable</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;=<span class="number">100</span>;i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>((i &amp; <span class="number">1</span>) == <span class="number">0</span>) System.out.println(Thread.currentThread().getName()+<span class="string">"："</span>+i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">OddNumThread</span> <span class="keyword">implements</span> <span class="title">Callable</span>&lt;<span class="title">Integer</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Integer <span class="title">call</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> sum=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;=<span class="number">100</span>;i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>((i &amp; <span class="number">1</span>) != <span class="number">0</span>)&#123;</span><br><span class="line">                System.out.println(Thread.currentThread().getName()+<span class="string">"："</span>+i);</span><br><span class="line">                sum+=i;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> sum;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>&nbsp;</p>
<h3 id="更新日志"><a href="#更新日志" class="headerlink" title="更新日志"></a>更新日志</h3><ul>
<li>2020.08.17 更新<strong>基本概念：程序 进程 线程</strong>中的定义和线程与进程的关系。</li>
<li>2020.08.20 更新<strong>基本概念：程序 进程 线程</strong>中的单核CPU和多核CPU的理解、并行与并发的辨析和何时需要多线程。第一节更新完毕。</li>
<li>2020.09.05 开始更新<strong>线程的创建和使用（重点）</strong></li>
<li>2020.09.06 继续更新<strong>线程的创建和使用（重点）</strong>，完成了方式一的代码和输出。完成<strong>Thread类的常用方法</strong>。</li>
<li>2020.09.07 继续更新<strong>线程的创建和使用（重点）</strong>，完成了<strong>线程的调度</strong>，线程的创建<strong>方式二：实现Runnable接口</strong>。</li>
<li>2020.09.09 更新<strong>线程的创建和使用（重点）</strong>中的<strong>线程的分类</strong>和<strong>线程的生命周期</strong>。</li>
<li>2020.09.10 开始更新<strong>线程的同步</strong>。</li>
<li>2020.09.11 更新<strong>线程的同步</strong>中的<strong>死锁问题</strong>和<strong>显式锁Lock</strong>。</li>
<li>2020.09.12 更新<strong>线程的通信</strong>。</li>
<li>2020.09.19 更新<strong>JDK 5.0新增的线程创建方式</strong>。</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/08/01/%E6%AC%A7%E6%8B%89%E7%AD%9B%E6%B3%95%EF%BC%88%E7%BA%BF%E6%80%A7%E7%AD%9B%E7%B4%A0%E6%95%B0%EF%BC%89/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jiong Liu">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ljiong">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/08/01/%E6%AC%A7%E6%8B%89%E7%AD%9B%E6%B3%95%EF%BC%88%E7%BA%BF%E6%80%A7%E7%AD%9B%E7%B4%A0%E6%95%B0%EF%BC%89/" class="post-title-link" itemprop="url">欧拉筛法（线性筛素数）</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-08-01 23:34:41" itemprop="dateCreated datePublished" datetime="2020-08-01T23:34:41+08:00">2020-08-01</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-08-02 05:47:36" itemprop="dateModified" datetime="2020-08-02T05:47:36+08:00">2020-08-02</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%AE%97%E6%B3%95/" itemprop="url" rel="index"><span itemprop="name">算法</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>欧拉筛法，一种可以在线性的时间复杂度内筛出素数的算法。</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2020/08/01/%E6%AC%A7%E6%8B%89%E7%AD%9B%E6%B3%95%EF%BC%88%E7%BA%BF%E6%80%A7%E7%AD%9B%E7%B4%A0%E6%95%B0%EF%BC%89/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/07/09/P1807-%E6%9C%80%E9%95%BF%E8%B7%AF/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jiong Liu">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ljiong">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/07/09/P1807-%E6%9C%80%E9%95%BF%E8%B7%AF/" class="post-title-link" itemprop="url">P1807 最长路</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-07-09 16:57:38" itemprop="dateCreated datePublished" datetime="2020-07-09T16:57:38+08:00">2020-07-09</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-08-05 05:58:36" itemprop="dateModified" datetime="2020-08-05T05:58:36+08:00">2020-08-05</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E9%A2%98%E8%A7%A3/" itemprop="url" rel="index"><span itemprop="name">题解</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><a href="https://www.luogu.com.cn/problem/P1807" target="_blank" rel="noopener">题目原文及输入/输出格式</a></p>
<h3 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h3><p>设$G$为有$n$个顶点的带权有向无环图，$G$中各顶点的编号为$1$到$n$，请设计算法，计算图$G$中 $<1,n>$间的最长路径。</1,n></p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2020/07/09/P1807-%E6%9C%80%E9%95%BF%E8%B7%AF/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/07/09/P1113-%E6%9D%82%E7%89%A9/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jiong Liu">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ljiong">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/07/09/P1113-%E6%9D%82%E7%89%A9/" class="post-title-link" itemprop="url">P1113 杂物</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-07-09 16:48:43 / 修改时间：22:59:41" itemprop="dateCreated datePublished" datetime="2020-07-09T16:48:43+08:00">2020-07-09</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E9%A2%98%E8%A7%A3/" itemprop="url" rel="index"><span itemprop="name">题解</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><a href="https://www.luogu.com.cn/problem/P1113" target="_blank" rel="noopener">题目原文及输入/输出格式</a></p>
<h3 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h3><p><code>John</code>的农场在给奶牛挤奶前有很多杂务要完成，每一项杂务都需要一定的时间来完成它。比如：他们要将奶牛集合起来，将他们赶进牛棚，为奶牛清洗乳房以及一些其它工作。尽早将所有杂务完成是必要的，因为这样才有更多时间挤出更多的牛奶。当然，有些杂务必须在另一些杂务完成的情况下才能进行。比如：只有将奶牛赶进牛棚才能开始为它清洗乳房，还有在未给奶牛清洗乳房之前不能挤奶。我们把这些工作称为完成本项工作的准备工作。至少有一项杂务不要求有准备工作，这个可以最早着手完成的工作，标记为杂务 1。<code>John</code>有需要完成的 n 个杂务的清单，并且这份清单是有一定顺序的，杂务 k(k&gt;1) 的准备工作只可能在杂务 1 至 k-1 中。</p>
<p>写一个程序从 1 到 n 读入每个杂务的工作说明。计算出所有杂务都被完成的最短时间。当然互相没有关系的杂务可以同时工作，并且，你可以假定<code>John</code>的农场有足够多的工人来同时完成任意多项任务。</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2020/07/09/P1113-%E6%9D%82%E7%89%A9/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/07/07/%E6%8B%93%E6%89%91%E6%8E%92%E5%BA%8F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jiong Liu">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ljiong">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/07/07/%E6%8B%93%E6%89%91%E6%8E%92%E5%BA%8F/" class="post-title-link" itemprop="url">拓扑排序</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-07-07 23:12:32" itemprop="dateCreated datePublished" datetime="2020-07-07T23:12:32+08:00">2020-07-07</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-08-05 06:03:03" itemprop="dateModified" datetime="2020-08-05T06:03:03+08:00">2020-08-05</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%AE%97%E6%B3%95/" itemprop="url" rel="index"><span itemprop="name">算法</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>把一个图的所有节点排序，使得每一条有向边$(u, v)$对应的$u$都排在$v$的前面。在图论中，这个问题称为拓扑排序(topological sort)。</p>
<p>不难发现：如果图中存在有向环，则不存在拓扑排序，反之则存在。所以可以用拓扑排序来检验是否存在有向环。</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2020/07/07/%E6%8B%93%E6%89%91%E6%8E%92%E5%BA%8F/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/07/06/%E9%93%BE%E5%BC%8F%E5%89%8D%E5%90%91%E6%98%9F%E5%AD%98%E5%9B%BE/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jiong Liu">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Ljiong">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/07/06/%E9%93%BE%E5%BC%8F%E5%89%8D%E5%90%91%E6%98%9F%E5%AD%98%E5%9B%BE/" class="post-title-link" itemprop="url">链式前向星存图</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-07-06 23:44:22" itemprop="dateCreated datePublished" datetime="2020-07-06T23:44:22+08:00">2020-07-06</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-07-09 06:26:13" itemprop="dateModified" datetime="2020-07-09T06:26:13+08:00">2020-07-09</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%AE%97%E6%B3%95/" itemprop="url" rel="index"><span itemprop="name">算法</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>一种数据结构，以储存边的方式来存储图。构造方法如下：读入每条边的信息，根据边的起点将边存入对应链表中。通过和链表一样的遍历可以查出以某个点出发的边。除了不能直接用起点终点定位以外，前向星几乎是完美的。</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2020/07/06/%E9%93%BE%E5%BC%8F%E5%89%8D%E5%90%91%E6%98%9F%E5%AD%98%E5%9B%BE/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Jiong Liu</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">27</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">6</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">10</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Jiong Liu</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  
      

<script>
  if (typeof MathJax === 'undefined') {
    window.MathJax = {
      loader: {
        source: {
          '[tex]/amsCd': '[tex]/amscd',
          '[tex]/AMScd': '[tex]/amscd'
        }
      },
      tex: {
        inlineMath: {'[+]': [['$', '$']]},
        tags: 'ams'
      },
      options: {
        renderActions: {
          findScript: [10, doc => {
            document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
              const display = !!node.type.match(/; *mode=display/);
              const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
              const text = document.createTextNode('');
              node.parentNode.replaceChild(text, node);
              math.start = {node: text, delim: '', n: 0};
              math.end = {node: text, delim: '', n: 0};
              doc.math.push(math);
            });
          }, '', false],
          insertedScript: [200, () => {
            document.querySelectorAll('mjx-container').forEach(node => {
              let target = node.parentNode;
              if (target.nodeName.toLowerCase() === 'li') {
                target.parentNode.classList.add('has-jax');
              }
            });
          }, '', false]
        }
      }
    };
    (function () {
      var script = document.createElement('script');
      script.src = '//cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js';
      script.defer = true;
      document.head.appendChild(script);
    })();
  } else {
    MathJax.startup.document.state(0);
    MathJax.texReset();
    MathJax.typeset();
  }
</script><!-- hexo-inject:begin --><!-- hexo-inject:end -->

    

  

</body>
</html>
